<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hugo blog org-capture-templates | alexforsale.github.io</title><meta name=keywords content="hugo,emacs,org"><meta name=description content="My blogging workflow"><meta name=author content="Kristian Alexander P"><link rel=canonical href=https://alexforsale.github.io/posts/hugo-blogging-org-capture-templates/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://alexforsale.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://alexforsale.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://alexforsale.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://alexforsale.github.io/apple-touch-icon.png><link rel=mask-icon href=https://alexforsale.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://alexforsale.github.io/posts/hugo-blogging-org-capture-templates/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://alexforsale.github.io/posts/hugo-blogging-org-capture-templates/"><meta property="og:site_name" content="alexforsale.github.io"><meta property="og:title" content="Hugo blog org-capture-templates"><meta property="og:description" content="My blogging workflow"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-03T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-28T22:49:03+00:00"><meta property="article:tag" content="Hugo"><meta property="article:tag" content="Emacs"><meta property="article:tag" content="Org"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hugo blog org-capture-templates"><meta name=twitter:description content="My blogging workflow"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://alexforsale.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Hugo blog org-capture-templates","item":"https://alexforsale.github.io/posts/hugo-blogging-org-capture-templates/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hugo blog org-capture-templates","name":"Hugo blog org-capture-templates","description":"My blogging workflow","keywords":["hugo","emacs","org"],"articleBody":"Blogging with org-mode I do almost all my note-taking in Emacs org-mode, so naturally I also prefer to write my blog posts in it. As for my ox-hugo blogging flow, I use the less preferred method: one org file per post, the consequence is I cannot just copy-paste the org capture setup provided by the doc site. I also setup my posts in a subdirectory beneath the HUGO_BASE_DIR:\n1 tree -n .. Code Snippet 1: my content directory 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 .. ├── about │ └── about.org ├── archives.org ├── configuring-neovim │ └── configuring-neovim.org ├── emacs-avy │ ├── avy.gif │ └── emacs-avy.org ├── emacs-builtin-use-package │ ├── emacs-builtin-use-package.org │ ├── prefix-key.png │ └── which-key-mode.png ├── emacs-debian-wsl │ ├── Emacs-WSL.png │ ├── WSL-2025-07-25 231457.png │ └── emacs-debian-wsl.org ├── emacs-evil │ └── emacs-evil.org ├── emacs-general │ └── emacs-general.org ├── emacs-sane-defaults │ ├── default-emacs.png │ ├── emacs-after.png │ ├── emacs-dired.png │ ├── emacs-eshell.png │ ├── emacs-sane-defaults.org │ └── emacs-tetris.png ├── emacs-shell │ ├── emacs-shell.org │ ├── eshell-command-form.png │ ├── eshell-elisp-form.png │ └── eshell.png ├── emacs-version-control │ ├── emacs-magit-status.png │ └── emacs-version-control.org ├── emacs-vertico │ ├── consult-buffer.png │ ├── consult-flymake.png │ ├── consult-outline.png │ ├── consult-yank-pop.png │ ├── corfu-completion.png │ ├── emacs-vertico.org │ ├── emacs-vertico.png │ ├── emacs-without-vertico.png │ ├── marginalia-describe-variable.png │ ├── marginalia-files.png │ ├── marginalia-find-file-with-icons.png │ ├── nerd-icons-corfu.png │ ├── orderless-default.png │ ├── vertico-buffer-mode.png │ ├── vertico-flat-mode.png │ ├── vertico-grid-mode.png │ ├── vertico-indexed-mode.png │ ├── vertico-quick.png │ └── vertico-reverse-mode.png ├── github-action-hugo-emacs │ ├── action-secrets-and-variables.png │ ├── deploy-github.png │ └── github-action-hugo-emacs.org ├── hugo-blogging-org-capture-templates │ ├── hugo-blogging-org-capture-templates.org │ └── transient.png ├── hyprland │ ├── applications.gif │ ├── hyprland.org │ └── hyprland.png ├── i3wm │ ├── i3wm-2025-06-23 23:42:18.gif │ ├── i3wm-2025-06-23_22-28.png │ ├── i3wm-dependency-2025-06-24_00-05.png │ ├── i3wm-scratch-2025-06-23 22-53.gif │ └── i3wm.org ├── learning-how-to-learn00 │ └── learning-how-to-learn00.org ├── learning-rust │ ├── learning-rust.org │ └── rust-perfect-number.png ├── literate-configuration │ ├── github-pages-deployed.png │ ├── literate-configuration.org │ ├── literate-emacs-screenshot.png │ └── org-edit-special.png ├── marks-and-registers-in-emacs │ └── marks-and-registers-in-emacs.org ├── modular-guix-system-configuration │ ├── EFI-partition.png │ ├── TRAMP.png │ ├── btrfs-subvolumes.png │ ├── cow-store.png │ ├── filesystem.png │ ├── linux-partition.png │ ├── modular-guix-system-configuration.org │ ├── mount-btrfs.png │ ├── mounting-subvolumes.png │ └── swapfile-creation.png ├── notmuch-mail-emacs │ ├── full.png │ └── notmuch-mail-emacs.org ├── org-mode-workflow │ ├── emacs-dashboard.png │ ├── org-agenda-custom-commands-upcoming.png │ ├── org-agenda-custom-commands-work.png │ ├── org-agenda-custom-incomplete.png │ ├── org-agenda-custom-next-three-days.png │ ├── org-agenda-custom-today.png │ ├── org-capture-1.png │ ├── org-capture-2.png │ ├── org-capture-firefox.png │ ├── org-capture-with-template-1.png │ ├── org-capture-with-template-2.png │ ├── org-capture-with-template-3.png │ ├── org-capture-with-template-4.png │ ├── org-mode-workflow.org │ ├── org-modern-agenda.png │ ├── org-modern.png │ ├── org-protocol-capture-firefox.png │ ├── task-flow.svg │ └── vanilla-emacs-org-agenda.png ├── projects │ └── projects.org ├── search.org ├── shell-tips-and-tricks │ └── shell-tips-and-tricks.org ├── syncthing-is-underrated │ ├── syncthing-is-underrated.org │ └── syncthing-web-2025-06-27_00-11.png ├── terminal-multiplexer │ ├── gnu-screen-2.png │ ├── gnu-screen.png │ └── terminal-multiplexer.org ├── theming-emacs │ ├── default-emacs.png │ ├── emacs-doom-theme-modeline-and-dashboard.png │ ├── emacs-wombat.png │ └── theming-emacs.org └── why-use-mpd ├── cantata-2025-06-26_22-54.png ├── mpc-2025-06-26_23-41.png ├── ncmpcpp-2025-06-26_22-44.png └── why-use-mpd.org 29 directories, 112 files Custom org-capture-templates First off, org-capture-templates is just like its name; it is a template for creation of new entries. It is used by org-mode, which is a killer feature of Emacs. Initially it was design to capture notes with little interruption1. But since it was all Emacs Lisp, we can modify it with ease.\nbasic template 1 2 3 4 5 (setq org-capture-templates '((\"t\" \"Todo\" entry (file+headline \"~/org/gtd.org\" \"Tasks\") \"* TODO %?\\n %i\\n %a\") (\"j\" \"Journal\" entry (file+datetree \"~/org/journal.org\") \"* %?\\nEntered on %U\\n %i\\n %a\"))) Code Snippet 2: from the manual org-capture-templates is a list of:\nkeys in the example, t is for todo entry and j is for journal. description usually a one-liner describing what kind of capture the key is. type the type of the entry, here entry is an org node with a headline. target where the capture should be placed. template the template itself2. So I need to tweak it a bit in order to automatically create a file within a subdirectory in my blog content (using the same name to make it easier). Not only that, ox-hugo use an org meta-data for hugo front-matter3. Each new files created must be started with these metadata (at minimal):\n1 2 3 4 5 6 7 8 9 10 11 12 #+options: ':nil -:nil ^:{} num:nil toc:nil #+author: Kristian Alexander P #+creator: Emacs 29.2 (Org mode 9.6.15 + ox-hugo) #+hugo_section: posts #+hugo_base_dir: ../../ #+date: \u003c2024-03-03 Sun\u003e #+title: Hugo blog org-capture-templates #+description: My blogging workflow #+hugo_tags: hugo emacs org #+hugo_categories: emacs #+hugo_auto_set_lastmod: t #+startup: inlineimages Code Snippet 3: ox-hugo metadata Some metadata will be different for each capture; title, description, hugo_tags, and hugo_categories. dates should be set as the capture date, the other will be needing a user input, including the filename, for the org-capture process.\nThose will be set as the template part. As for the target, I’m using a simple Emacs Lisp function:\n1 2 3 4 5 (defun +config/create-new-blog-post () \"Create new blog post path.\" (interactive) (let ((name (read-string \"Filename: \"))) (concat +config/blog-directory \"/content-org/\" (format \"%s\" name) \"/\" (format \"%s.org\" name)))) Code Snippet 4: my targeting function This function is just a basic input/output; it will ask for a file name, and then it will concatenate it as a valid file path, here subtituted as a variable +config/blog-directory\n1 2 3 (when (file-directory-p (expand-file-name \"alexforsale.github.io\" org-directory)) (customize-set-variable '+config/blog-directory (expand-file-name \"alexforsale.github.io\" org-directory))) Code Snippet 5: the variable definition Basically it will look for a directory named “alexforsale.github.io” (it’s my github-page repository) inside the variable org-directory, which is also should be set.\nThe actual template 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 (add-to-list 'org-capture-templates '(\"b\" \"(b)log post\" plain (file +config/create-new-blog-post) \"\\ #+options: ':nil -:nil ^:{} num:nil toc:nil #+author: %n #+creator: Emacs %(eval emacs-version) (Org mode %(eval org-version) + ox-hugo) #+hugo_section: posts #+hugo_base_dir: ../../ #+date: %t #+title: %^{title} #+hugo_draft: true #+description: %^{description} #+hugo_tags: %^{tags} #+hugo_categories: %^{categories} #+hugo_auto_set_lastmod: t #+startup: inlineimages\\n%?\" :unnarrowed t :jump-to-captured t)) Code Snippet 6: my capture template This will create a draft post, to publish it set the draft to false. Some template expansions I use:\n%n this will expand to the variable user-full-name. %t date. %^{title}, %{description}, %^{tags}, and %^{categories} will prompt for the user for each metadata. \\n is for newline. %? will be the point location. Usually, org-capture is not bound to any keys, the recommended way is to bind it to C-c c4. So to use this template the keybinding is C-c c b.\n1 2 3 (global-set-key (kbd \"C-c l\") #'org-store-link) (global-set-key (kbd \"C-c a\") #'org-agenda) (global-set-key (kbd \"C-c c\") #'org-capture) Code Snippet 7: the recommended keybindings Preview hugo blog locally Before pushing each commits to my github repository, I’d view my blog in my local machine, With hugo this can be done by running:\n1 hugo server --buildDrafts --navigateToChanged Code Snippet 8: hugo server from within the HUGO_BASE_DIR directory. This can be done from a terminal emulator, or, since I’m using Emacs, I can run it using async-shell-command, which is actually shell-command, but adds a \u0026 at the end of the command to run it asynchronously.\n1 (async-shell-command \"hugo server --buildDrafts --navigateToChanged \u0026\" \"*hugo*\" \"*hugo-error*\") Code Snippet 9: running hugo server within emacs The *hugo* argument is the output-buffer, and *hugo-error* is the error-buffer. But since the hugo server command has many other flags, I use an external package called transient5 to toggle each flags.\n1 hugo server --help Code Snippet 10: hugo server help 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 Hugo provides its own webserver which builds and serves the site. While hugo server is high performance, it is a webserver with limited options. The `hugo server` command will by default write and serve files from disk, but you can render to memory by using the `--renderToMemory` flag. This can be faster in some cases, but it will consume more memory. By default hugo will also watch your files for any changes you make and automatically rebuild the site. It will then live reload any open browser pages and push the latest content to them. As most Hugo sites are built in a fraction of a second, you will be able to save and see your changes nearly instantly. Usage: hugo server [command] [flags] hugo server [command] Aliases: server, serve Available Commands: trust Install the local CA in the system trust store Flags: --appendPort append port to baseURL (default true) -b, --baseURL string hostname (and path) to the root, e.g. https://spf13.com/ --bind string interface to which the server will bind (default \"127.0.0.1\") -D, --buildDrafts include content marked as draft -E, --buildExpired include expired content -F, --buildFuture include content with publishdate in the future --cacheDir string filesystem path to cache directory --cleanDestinationDir remove files from destination not found in static directories -c, --contentDir string filesystem path to content directory --disableBrowserError do not show build errors in the browser --disableFastRender enables full re-renders on changes --disableKinds strings disable different kind of pages (home, RSS etc.) --disableLiveReload watch without enabling live browser reload on rebuild --enableGitInfo add Git revision, date, author, and CODEOWNERS info to the pages --forceSyncStatic copy all files when static is changed. --gc enable to run some cleanup tasks (remove unused cache files) after the build -h, --help help for server --ignoreCache ignores the cache directory -l, --layoutDir string filesystem path to layout directory --liveReloadPort int port for live reloading (i.e. 443 in HTTPS proxy situations) (default -1) --minify minify any supported output format (HTML, XML etc.) -N, --navigateToChanged navigate to changed content file on live browser reload --noChmod don't sync permission mode of files --noHTTPCache prevent HTTP caching --noTimes don't sync modification time of files -O, --openBrowser open the site in a browser after server startup --panicOnWarning panic on first WARNING log --poll string set this to a poll interval, e.g --poll 700ms, to use a poll based approach to watch for file system changes -p, --port int port on which the server will listen (default 1313) --pprof enable the pprof server (port 8080) --printI18nWarnings print missing translations --printMemoryUsage print memory usage to screen at intervals --printPathWarnings print warnings on duplicate target paths etc. --printUnusedTemplates print warnings on unused templates. --renderSegments strings named segments to render (configured in the segments config) --renderStaticToDisk serve static files from disk and dynamic files from memory --templateMetrics display metrics about template executions --templateMetricsHints calculate some improvement hints when combined with --templateMetrics -t, --theme strings themes to use (located in /themes/THEMENAME/) --tlsAuto generate and use locally-trusted certificates. --tlsCertFile string path to TLS certificate file --tlsKeyFile string path to TLS key file --trace file write trace to file (not useful in general) -w, --watch watch filesystem for changes and recreate as needed (default true) Global Flags: --clock string set the clock used by Hugo, e.g. --clock 2021-11-06T22:30:00.00+09:00 --config string config file (default is hugo.yaml|json|toml) --configDir string config dir (default \"config\") -d, --destination string filesystem path to write files to -e, --environment string build environment --ignoreVendorPaths string ignores any _vendor for module paths matching the given Glob pattern --logLevel string log level (debug|info|warn|error) --noBuildLock don't create .hugo_build.lock file --quiet build in quiet mode -M, --renderToMemory render to memory (mostly useful when running the server) -s, --source string filesystem path to read files relative from --themesDir string filesystem path to themes directory Use \"hugo server [command] --help\" for more information about a command. Then I just use transient-define-prefix to create the command.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 (use-package transient :config (transient-define-prefix +config/transient-hugo-server () \"Run hugo server with `transient'.\" :man-page \"hugo-server\" [\"Options\" (\"q\" \"quit\" transient-quit-all) (\"-D\" \"Build drafts\" \"--buildDrafts\") (\"-E\" \"Build expired\" \"--buildExpired\") (\"-F\" \"Build future\" \"--buildFuture\") (\"-d\" \"Debug\" \"--debug\") (\"-B\" \"Disable build errors on browser\" \"--disableBrowserError\") (\"-c\" \"Clean destination dir\" \"--cleanDestinationDir\") (\"-e\" \"Enable Git info\" \"--enableGitInfo\") (\"-F\" \"enable full re-renders on changes\" \"--disableFastRender\") (\"-f\" \"Force sync static files\" \"--forceSyncStatic\") (\"-g\" \"enable to run some cleanup tasks\" \"--gc\") (\"-m\" \"Minify any supported output format\" \"--minify\") (\"-C\" \"No chmod\" \"--noChmod\") (\"-T\" \"Don't sync modification time of files\" \"--noTimes\") (\"-I\" \"Print missing translation\" \"--printI18nWarnings\") (\"-M\" \"Print memory usage\" \"--printMemoryUsage\") (\"-P\" \"Print warning on duplicate target path\" \"--printPathWarnings\") (\"-q\" \"Quiet\" \"--quiet\") (\"-v\" \"Verbose\" \"--verbose\") (\"-w\" \"Watch filesystem for changes\" \"--watch\")] [\"Action\" (\"s\" \"hugo server\" +config/start-hugo-server)])) Code Snippet 11: install transient with use-package and define our hugo server command, see their showcase to learn how to use transient. I use this heavily in the past. Note that the “Action” (s) is +config/start-hugo-server which we need to define:\n1 2 3 4 5 6 7 8 (defun +config/start-hugo-server (args) \"Start hugo server in `+config/blog-directory'.\" (interactive (list (transient-args '+config/transient-hugo-server))) (if (not (executable-find \"hugo\")) (message \"hugo executable not found\") (let ((default-directory +config/blog-directory) (command \"hugo server\")) (async-shell-command (mapconcat #'identity `(,command ,@args) \" \") \"*hugo*\" \"*hugo-error*\")))) Code Snippet 12: the function This function will run hugo server, with additional args which will be provided by the transient command.\nthe mapconcat will apply the first argument to each element of the second arguments, for example:\n1 (mapconcat #'identity '(\"abc\" \"def\" \"ghi\") \". \") Code Snippet 13: mapconcat example 1 \"abc. def. ghi\" the identity simply returns the arguments unchanged.\nFigure 1: transient in action\nhttps://orgmode.org/manual/Capture-templates.html ↩︎\nhttps://orgmode.org/manual/Template-expansion.html ↩︎\nhttps://ox-hugo.scripter.co/doc/org-meta-data-to-hugo-front-matter/ ↩︎\nhttps://orgmode.org/org.html#Activation-1 ↩︎\nSee the manual for transient ↩︎\n","wordCount":"2401","inLanguage":"en","datePublished":"2024-03-03T00:00:00Z","dateModified":"2025-07-28T22:49:03Z","author":[{"@type":"Person","name":"Kristian Alexander P"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://alexforsale.github.io/posts/hugo-blogging-org-capture-templates/"},"publisher":{"@type":"Organization","name":"alexforsale.github.io","logo":{"@type":"ImageObject","url":"https://alexforsale.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://alexforsale.github.io/ accesskey=h title="alexforsale.github.io (Alt + H)">alexforsale.github.io</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://alexforsale.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://alexforsale.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://alexforsale.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://alexforsale.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://alexforsale.github.io/about/ title=about><span>about</span></a></li><li><a href=https://alexforsale.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://alexforsale.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://alexforsale.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Hugo blog org-capture-templates</h1><div class=post-description>My blogging workflow</div><div class=post-meta><span title='2024-03-03 00:00:00 +0000 UTC'>March 3, 2024</span>&nbsp;·&nbsp;<span title='2025-07-28 22:49:03 +0000 UTC'>(updated July 28, 2025)</span>&nbsp;·&nbsp;12 min&nbsp;·&nbsp;2401 words&nbsp;·&nbsp;Kristian Alexander P</div></header><div class=post-content><h2 id=blogging-with-org-mode>Blogging with <code>org-mode</code><a hidden class=anchor aria-hidden=true href=#blogging-with-org-mode>#</a></h2><p>I do almost all my note-taking in <em>Emacs org-mode</em>, so naturally I also prefer to write my blog posts in it. As for my <em>ox-hugo</em> <a href=https://ox-hugo.scripter.co/doc/blogging-flow/>blogging flow</a>, I use the less preferred method: one org file per post, the consequence is I cannot just copy-paste the <a href=https://ox-hugo.scripter.co/doc/org-capture-setup/>org capture setup</a> provided by the doc site. I also setup my posts in a subdirectory beneath the <code>HUGO_BASE_DIR</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>tree -n  ..
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 1:</span>
my content directory</div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>..
</span></span><span class=line><span class=cl>├── about
</span></span><span class=line><span class=cl>│   └── about.org
</span></span><span class=line><span class=cl>├── archives.org
</span></span><span class=line><span class=cl>├── configuring-neovim
</span></span><span class=line><span class=cl>│   └── configuring-neovim.org
</span></span><span class=line><span class=cl>├── emacs-avy
</span></span><span class=line><span class=cl>│   ├── avy.gif
</span></span><span class=line><span class=cl>│   └── emacs-avy.org
</span></span><span class=line><span class=cl>├── emacs-builtin-use-package
</span></span><span class=line><span class=cl>│   ├── emacs-builtin-use-package.org
</span></span><span class=line><span class=cl>│   ├── prefix-key.png
</span></span><span class=line><span class=cl>│   └── which-key-mode.png
</span></span><span class=line><span class=cl>├── emacs-debian-wsl
</span></span><span class=line><span class=cl>│   ├── Emacs-WSL.png
</span></span><span class=line><span class=cl>│   ├── WSL-2025-07-25 231457.png
</span></span><span class=line><span class=cl>│   └── emacs-debian-wsl.org
</span></span><span class=line><span class=cl>├── emacs-evil
</span></span><span class=line><span class=cl>│   └── emacs-evil.org
</span></span><span class=line><span class=cl>├── emacs-general
</span></span><span class=line><span class=cl>│   └── emacs-general.org
</span></span><span class=line><span class=cl>├── emacs-sane-defaults
</span></span><span class=line><span class=cl>│   ├── default-emacs.png
</span></span><span class=line><span class=cl>│   ├── emacs-after.png
</span></span><span class=line><span class=cl>│   ├── emacs-dired.png
</span></span><span class=line><span class=cl>│   ├── emacs-eshell.png
</span></span><span class=line><span class=cl>│   ├── emacs-sane-defaults.org
</span></span><span class=line><span class=cl>│   └── emacs-tetris.png
</span></span><span class=line><span class=cl>├── emacs-shell
</span></span><span class=line><span class=cl>│   ├── emacs-shell.org
</span></span><span class=line><span class=cl>│   ├── eshell-command-form.png
</span></span><span class=line><span class=cl>│   ├── eshell-elisp-form.png
</span></span><span class=line><span class=cl>│   └── eshell.png
</span></span><span class=line><span class=cl>├── emacs-version-control
</span></span><span class=line><span class=cl>│   ├── emacs-magit-status.png
</span></span><span class=line><span class=cl>│   └── emacs-version-control.org
</span></span><span class=line><span class=cl>├── emacs-vertico
</span></span><span class=line><span class=cl>│   ├── consult-buffer.png
</span></span><span class=line><span class=cl>│   ├── consult-flymake.png
</span></span><span class=line><span class=cl>│   ├── consult-outline.png
</span></span><span class=line><span class=cl>│   ├── consult-yank-pop.png
</span></span><span class=line><span class=cl>│   ├── corfu-completion.png
</span></span><span class=line><span class=cl>│   ├── emacs-vertico.org
</span></span><span class=line><span class=cl>│   ├── emacs-vertico.png
</span></span><span class=line><span class=cl>│   ├── emacs-without-vertico.png
</span></span><span class=line><span class=cl>│   ├── marginalia-describe-variable.png
</span></span><span class=line><span class=cl>│   ├── marginalia-files.png
</span></span><span class=line><span class=cl>│   ├── marginalia-find-file-with-icons.png
</span></span><span class=line><span class=cl>│   ├── nerd-icons-corfu.png
</span></span><span class=line><span class=cl>│   ├── orderless-default.png
</span></span><span class=line><span class=cl>│   ├── vertico-buffer-mode.png
</span></span><span class=line><span class=cl>│   ├── vertico-flat-mode.png
</span></span><span class=line><span class=cl>│   ├── vertico-grid-mode.png
</span></span><span class=line><span class=cl>│   ├── vertico-indexed-mode.png
</span></span><span class=line><span class=cl>│   ├── vertico-quick.png
</span></span><span class=line><span class=cl>│   └── vertico-reverse-mode.png
</span></span><span class=line><span class=cl>├── github-action-hugo-emacs
</span></span><span class=line><span class=cl>│   ├── action-secrets-and-variables.png
</span></span><span class=line><span class=cl>│   ├── deploy-github.png
</span></span><span class=line><span class=cl>│   └── github-action-hugo-emacs.org
</span></span><span class=line><span class=cl>├── hugo-blogging-org-capture-templates
</span></span><span class=line><span class=cl>│   ├── hugo-blogging-org-capture-templates.org
</span></span><span class=line><span class=cl>│   └── transient.png
</span></span><span class=line><span class=cl>├── hyprland
</span></span><span class=line><span class=cl>│   ├── applications.gif
</span></span><span class=line><span class=cl>│   ├── hyprland.org
</span></span><span class=line><span class=cl>│   └── hyprland.png
</span></span><span class=line><span class=cl>├── i3wm
</span></span><span class=line><span class=cl>│   ├── i3wm-2025-06-23 23:42:18.gif
</span></span><span class=line><span class=cl>│   ├── i3wm-2025-06-23_22-28.png
</span></span><span class=line><span class=cl>│   ├── i3wm-dependency-2025-06-24_00-05.png
</span></span><span class=line><span class=cl>│   ├── i3wm-scratch-2025-06-23 22-53.gif
</span></span><span class=line><span class=cl>│   └── i3wm.org
</span></span><span class=line><span class=cl>├── learning-how-to-learn00
</span></span><span class=line><span class=cl>│   └── learning-how-to-learn00.org
</span></span><span class=line><span class=cl>├── learning-rust
</span></span><span class=line><span class=cl>│   ├── learning-rust.org
</span></span><span class=line><span class=cl>│   └── rust-perfect-number.png
</span></span><span class=line><span class=cl>├── literate-configuration
</span></span><span class=line><span class=cl>│   ├── github-pages-deployed.png
</span></span><span class=line><span class=cl>│   ├── literate-configuration.org
</span></span><span class=line><span class=cl>│   ├── literate-emacs-screenshot.png
</span></span><span class=line><span class=cl>│   └── org-edit-special.png
</span></span><span class=line><span class=cl>├── marks-and-registers-in-emacs
</span></span><span class=line><span class=cl>│   └── marks-and-registers-in-emacs.org
</span></span><span class=line><span class=cl>├── modular-guix-system-configuration
</span></span><span class=line><span class=cl>│   ├── EFI-partition.png
</span></span><span class=line><span class=cl>│   ├── TRAMP.png
</span></span><span class=line><span class=cl>│   ├── btrfs-subvolumes.png
</span></span><span class=line><span class=cl>│   ├── cow-store.png
</span></span><span class=line><span class=cl>│   ├── filesystem.png
</span></span><span class=line><span class=cl>│   ├── linux-partition.png
</span></span><span class=line><span class=cl>│   ├── modular-guix-system-configuration.org
</span></span><span class=line><span class=cl>│   ├── mount-btrfs.png
</span></span><span class=line><span class=cl>│   ├── mounting-subvolumes.png
</span></span><span class=line><span class=cl>│   └── swapfile-creation.png
</span></span><span class=line><span class=cl>├── notmuch-mail-emacs
</span></span><span class=line><span class=cl>│   ├── full.png
</span></span><span class=line><span class=cl>│   └── notmuch-mail-emacs.org
</span></span><span class=line><span class=cl>├── org-mode-workflow
</span></span><span class=line><span class=cl>│   ├── emacs-dashboard.png
</span></span><span class=line><span class=cl>│   ├── org-agenda-custom-commands-upcoming.png
</span></span><span class=line><span class=cl>│   ├── org-agenda-custom-commands-work.png
</span></span><span class=line><span class=cl>│   ├── org-agenda-custom-incomplete.png
</span></span><span class=line><span class=cl>│   ├── org-agenda-custom-next-three-days.png
</span></span><span class=line><span class=cl>│   ├── org-agenda-custom-today.png
</span></span><span class=line><span class=cl>│   ├── org-capture-1.png
</span></span><span class=line><span class=cl>│   ├── org-capture-2.png
</span></span><span class=line><span class=cl>│   ├── org-capture-firefox.png
</span></span><span class=line><span class=cl>│   ├── org-capture-with-template-1.png
</span></span><span class=line><span class=cl>│   ├── org-capture-with-template-2.png
</span></span><span class=line><span class=cl>│   ├── org-capture-with-template-3.png
</span></span><span class=line><span class=cl>│   ├── org-capture-with-template-4.png
</span></span><span class=line><span class=cl>│   ├── org-mode-workflow.org
</span></span><span class=line><span class=cl>│   ├── org-modern-agenda.png
</span></span><span class=line><span class=cl>│   ├── org-modern.png
</span></span><span class=line><span class=cl>│   ├── org-protocol-capture-firefox.png
</span></span><span class=line><span class=cl>│   ├── task-flow.svg
</span></span><span class=line><span class=cl>│   └── vanilla-emacs-org-agenda.png
</span></span><span class=line><span class=cl>├── projects
</span></span><span class=line><span class=cl>│   └── projects.org
</span></span><span class=line><span class=cl>├── search.org
</span></span><span class=line><span class=cl>├── shell-tips-and-tricks
</span></span><span class=line><span class=cl>│   └── shell-tips-and-tricks.org
</span></span><span class=line><span class=cl>├── syncthing-is-underrated
</span></span><span class=line><span class=cl>│   ├── syncthing-is-underrated.org
</span></span><span class=line><span class=cl>│   └── syncthing-web-2025-06-27_00-11.png
</span></span><span class=line><span class=cl>├── terminal-multiplexer
</span></span><span class=line><span class=cl>│   ├── gnu-screen-2.png
</span></span><span class=line><span class=cl>│   ├── gnu-screen.png
</span></span><span class=line><span class=cl>│   └── terminal-multiplexer.org
</span></span><span class=line><span class=cl>├── theming-emacs
</span></span><span class=line><span class=cl>│   ├── default-emacs.png
</span></span><span class=line><span class=cl>│   ├── emacs-doom-theme-modeline-and-dashboard.png
</span></span><span class=line><span class=cl>│   ├── emacs-wombat.png
</span></span><span class=line><span class=cl>│   └── theming-emacs.org
</span></span><span class=line><span class=cl>└── why-use-mpd
</span></span><span class=line><span class=cl>    ├── cantata-2025-06-26_22-54.png
</span></span><span class=line><span class=cl>    ├── mpc-2025-06-26_23-41.png
</span></span><span class=line><span class=cl>    ├── ncmpcpp-2025-06-26_22-44.png
</span></span><span class=line><span class=cl>    └── why-use-mpd.org
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>29 directories, 112 files
</span></span></code></pre></td></tr></table></div></div><h3 id=custom-org-capture-templates>Custom <code>org-capture-templates</code><a hidden class=anchor aria-hidden=true href=#custom-org-capture-templates>#</a></h3><p>First off, <code>org-capture-templates</code> is just like its name; it is a template for creation of new entries. It is used by <code>org-mode</code>, which is a killer feature of <em>Emacs</em>. Initially it was design to capture notes with little interruption<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. But since it was all <em>Emacs Lisp</em>, we can modify it with ease.</p><h4 id=basic-template>basic template<a hidden class=anchor aria-hidden=true href=#basic-template>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-capture-templates</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;t&#34;</span> <span class=s>&#34;Todo&#34;</span> <span class=nv>entry</span> <span class=p>(</span><span class=nv>file+headline</span> <span class=s>&#34;~/org/gtd.org&#34;</span> <span class=s>&#34;Tasks&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=s>&#34;* TODO %?\n  %i\n  %a&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=s>&#34;j&#34;</span> <span class=s>&#34;Journal&#34;</span> <span class=nv>entry</span> <span class=p>(</span><span class=nv>file+datetree</span> <span class=s>&#34;~/org/journal.org&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=s>&#34;* %?\nEntered on %U\n  %i\n  %a&#34;</span><span class=p>)))</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 2:</span>
from the manual</div><p><code>org-capture-templates</code> is a list of:</p><dl><dt>keys</dt><dd>in the example, <code>t</code> is for todo entry and <code>j</code> is for journal.</dd><dt>description</dt><dd>usually a one-liner describing what kind of capture the key is.</dd><dt>type</dt><dd>the type of the entry, here <code>entry</code> is an org node with a headline.</dd><dt>target</dt><dd>where the capture should be placed.</dd><dt>template</dt><dd>the template itself<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</dd></dl><p>So I need to tweak it a bit in order to automatically create a file within a subdirectory in my blog content (using the same name to make it easier). Not only that, <code>ox-hugo</code> use an org meta-data for hugo front-matter<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>. Each new files created must be started with these metadata (at minimal):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-org data-lang=org><span class=line><span class=cl><span class=cs>#+options</span><span class=c>: &#39;:nil -:nil ^:{} num:nil toc:nil</span>
</span></span><span class=line><span class=cl><span class=cs>#+author</span><span class=c>: Kristian Alexander P</span>
</span></span><span class=line><span class=cl><span class=cs>#+creator</span><span class=c>: Emacs 29.2 (Org mode 9.6.15 + ox-hugo)</span>
</span></span><span class=line><span class=cl><span class=cs>#+hugo_section</span><span class=c>: posts</span>
</span></span><span class=line><span class=cl><span class=cs>#+hugo_base_dir</span><span class=c>: ../../</span>
</span></span><span class=line><span class=cl><span class=cs>#+date</span><span class=c>: &lt;2024-03-03 Sun&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>#+title</span><span class=c>: Hugo blog org-capture-templates</span>
</span></span><span class=line><span class=cl><span class=cs>#+description</span><span class=c>: My blogging workflow</span>
</span></span><span class=line><span class=cl><span class=cs>#+hugo_tags</span><span class=c>: hugo emacs org</span>
</span></span><span class=line><span class=cl><span class=cs>#+hugo_categories</span><span class=c>: emacs</span>
</span></span><span class=line><span class=cl><span class=cs>#+hugo_auto_set_lastmod</span><span class=c>: t</span>
</span></span><span class=line><span class=cl><span class=cs>#+startup</span><span class=c>: inlineimages</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 3:</span>
ox-hugo metadata</div><p>Some metadata will be different for each capture; <code>title</code>, <code>description</code>, <code>hugo_tags</code>, and <code>hugo_categories</code>. <code>dates</code> should be set as the capture date, the other will be needing a user input, including the filename, for the <code>org-capture</code> process.</p><p>Those will be set as the <code>template</code> part. As for the <code>target</code>, I&rsquo;m using a simple <em>Emacs Lisp</em> function:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>+config/create-new-blog-post</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Create new blog post path.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>name</span> <span class=p>(</span><span class=nf>read-string</span> <span class=s>&#34;Filename: &#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>concat</span> <span class=nv>+config/blog-directory</span> <span class=s>&#34;/content-org/&#34;</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;%s&#34;</span> <span class=nv>name</span><span class=p>)</span> <span class=s>&#34;/&#34;</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;%s.org&#34;</span> <span class=nv>name</span><span class=p>))))</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 4:</span>
my targeting function</div><p>This function is just a basic input/output; it will ask for a file name, and then it will concatenate it as a valid file path, here subtituted as a variable <code>+config/blog-directory</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nf>file-directory-p</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;alexforsale.github.io&#34;</span> <span class=nv>org-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;+config/blog-directory</span>
</span></span><span class=line><span class=cl>                          <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;alexforsale.github.io&#34;</span> <span class=nv>org-directory</span><span class=p>)))</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 5:</span>
the variable definition</div><p>Basically it will look for a directory named &ldquo;alexforsale.github.io&rdquo; (it&rsquo;s my github-page repository) inside the variable <code>org-directory</code>, which is also should be set.</p><h4 id=the-actual-template>The actual template<a hidden class=anchor aria-hidden=true href=#the-actual-template>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-capture-templates</span>
</span></span><span class=line><span class=cl>             <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;b&#34;</span> <span class=s>&#34;(b)log post&#34;</span> <span class=nv>plain</span>
</span></span><span class=line><span class=cl>               <span class=p>(</span><span class=nv>file</span> <span class=nv>+config/create-new-blog-post</span><span class=p>)</span>
</span></span><span class=line><span class=cl>               <span class=s>&#34;\
</span></span></span><span class=line><span class=cl><span class=s>#+options: &#39;:nil -:nil ^:{} num:nil toc:nil
</span></span></span><span class=line><span class=cl><span class=s>#+author: %n
</span></span></span><span class=line><span class=cl><span class=s>#+creator: Emacs %(eval emacs-version) (Org mode %(eval org-version) + ox-hugo)
</span></span></span><span class=line><span class=cl><span class=s>#+hugo_section: posts
</span></span></span><span class=line><span class=cl><span class=s>#+hugo_base_dir: ../../
</span></span></span><span class=line><span class=cl><span class=s>#+date: %t
</span></span></span><span class=line><span class=cl><span class=s>#+title: %^{title}
</span></span></span><span class=line><span class=cl><span class=s>#+hugo_draft: true
</span></span></span><span class=line><span class=cl><span class=s>#+description: %^{description}
</span></span></span><span class=line><span class=cl><span class=s>#+hugo_tags: %^{tags}
</span></span></span><span class=line><span class=cl><span class=s>#+hugo_categories: %^{categories}
</span></span></span><span class=line><span class=cl><span class=s>#+hugo_auto_set_lastmod: t
</span></span></span><span class=line><span class=cl><span class=s>#+startup: inlineimages\n%?&#34;</span> <span class=nb>:unnarrowed</span> <span class=no>t</span> <span class=nb>:jump-to-captured</span> <span class=no>t</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 6:</span>
my capture template</div><p>This will create a draft post, to publish it set the <code>draft</code> to <code>false</code>. Some template expansions I use:</p><dl><dt><code>%n</code></dt><dd>this will expand to the variable <code>user-full-name</code>.</dd><dt><code>%t</code></dt><dd>date.</dd><dt><code>%^{title}</code>, <code>%{description}</code>, <code>%^{tags}</code>, and <code>%^{categories}</code></dt><dd>will prompt for the user for each metadata.</dd><dt><code>\n</code></dt><dd>is for newline.</dd><dt><code>%?</code></dt><dd>will be the point location.</dd></dl><p>Usually, <code>org-capture</code> is not bound to any keys, the recommended way is to bind it to <code>C-c c</code><sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>. So to use this template the keybinding is <code>C-c c b</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c l&#34;</span><span class=p>)</span> <span class=nf>#&#39;</span><span class=nv>org-store-link</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c a&#34;</span><span class=p>)</span> <span class=nf>#&#39;</span><span class=nv>org-agenda</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c c&#34;</span><span class=p>)</span> <span class=nf>#&#39;</span><span class=nv>org-capture</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 7:</span>
the recommended keybindings</div><h3 id=preview-hugo-blog-locally>Preview hugo blog locally<a hidden class=anchor aria-hidden=true href=#preview-hugo-blog-locally>#</a></h3><p>Before pushing each commits to my github repository, I&rsquo;d view my blog in my local machine, With <em>hugo</em> this can be done by running:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>hugo server --buildDrafts --navigateToChanged
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 8:</span>
hugo server</div><p>from within the <code>HUGO_BASE_DIR</code> directory. This can be done from a terminal emulator, or, since I&rsquo;m using <em>Emacs</em>, I can run it using <code>async-shell-command</code>, which is actually <code>shell-command</code>, but adds a <code>&</code> at the end of the command to run it asynchronously.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>async-shell-command</span> <span class=s>&#34;hugo server --buildDrafts --navigateToChanged &amp;&#34;</span> <span class=s>&#34;*hugo*&#34;</span> <span class=s>&#34;*hugo-error*&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 9:</span>
running hugo server within emacs</div><p>The <code>*hugo*</code> argument is the output-buffer, and <code>*hugo-error*</code> is the error-buffer. But since the <code>hugo server</code> command has many other <em>flags</em>, I use an external package called <a href=https://github.com/magit/transient>transient</a><sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup> to toggle each <em>flags</em>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>hugo server --help
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 10:</span>
hugo server help</div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Hugo provides its own webserver which builds and serves the site.
</span></span><span class=line><span class=cl>While hugo server is high performance, it is a webserver with limited options.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>The `hugo server` command will by default write and serve files from disk, but
</span></span><span class=line><span class=cl>you can render to memory by using the `--renderToMemory` flag. This can be
</span></span><span class=line><span class=cl>faster in some cases, but it will consume more memory.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>By default hugo will also watch your files for any changes you make and
</span></span><span class=line><span class=cl>automatically rebuild the site. It will then live reload any open browser pages
</span></span><span class=line><span class=cl>and push the latest content to them. As most Hugo sites are built in a fraction
</span></span><span class=line><span class=cl>of a second, you will be able to save and see your changes nearly instantly.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Usage:
</span></span><span class=line><span class=cl>  hugo server [command] [flags]
</span></span><span class=line><span class=cl>  hugo server [command]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Aliases:
</span></span><span class=line><span class=cl>  server, serve
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Available Commands:
</span></span><span class=line><span class=cl>  trust       Install the local CA in the system trust store
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Flags:
</span></span><span class=line><span class=cl>      --appendPort               append port to baseURL (default true)
</span></span><span class=line><span class=cl>  -b, --baseURL string           hostname (and path) to the root, e.g. https://spf13.com/
</span></span><span class=line><span class=cl>      --bind string              interface to which the server will bind (default &#34;127.0.0.1&#34;)
</span></span><span class=line><span class=cl>  -D, --buildDrafts              include content marked as draft
</span></span><span class=line><span class=cl>  -E, --buildExpired             include expired content
</span></span><span class=line><span class=cl>  -F, --buildFuture              include content with publishdate in the future
</span></span><span class=line><span class=cl>      --cacheDir string          filesystem path to cache directory
</span></span><span class=line><span class=cl>      --cleanDestinationDir      remove files from destination not found in static directories
</span></span><span class=line><span class=cl>  -c, --contentDir string        filesystem path to content directory
</span></span><span class=line><span class=cl>      --disableBrowserError      do not show build errors in the browser
</span></span><span class=line><span class=cl>      --disableFastRender        enables full re-renders on changes
</span></span><span class=line><span class=cl>      --disableKinds strings     disable different kind of pages (home, RSS etc.)
</span></span><span class=line><span class=cl>      --disableLiveReload        watch without enabling live browser reload on rebuild
</span></span><span class=line><span class=cl>      --enableGitInfo            add Git revision, date, author, and CODEOWNERS info to the pages
</span></span><span class=line><span class=cl>      --forceSyncStatic          copy all files when static is changed.
</span></span><span class=line><span class=cl>      --gc                       enable to run some cleanup tasks (remove unused cache files) after the build
</span></span><span class=line><span class=cl>  -h, --help                     help for server
</span></span><span class=line><span class=cl>      --ignoreCache              ignores the cache directory
</span></span><span class=line><span class=cl>  -l, --layoutDir string         filesystem path to layout directory
</span></span><span class=line><span class=cl>      --liveReloadPort int       port for live reloading (i.e. 443 in HTTPS proxy situations) (default -1)
</span></span><span class=line><span class=cl>      --minify                   minify any supported output format (HTML, XML etc.)
</span></span><span class=line><span class=cl>  -N, --navigateToChanged        navigate to changed content file on live browser reload
</span></span><span class=line><span class=cl>      --noChmod                  don&#39;t sync permission mode of files
</span></span><span class=line><span class=cl>      --noHTTPCache              prevent HTTP caching
</span></span><span class=line><span class=cl>      --noTimes                  don&#39;t sync modification time of files
</span></span><span class=line><span class=cl>  -O, --openBrowser              open the site in a browser after server startup
</span></span><span class=line><span class=cl>      --panicOnWarning           panic on first WARNING log
</span></span><span class=line><span class=cl>      --poll string              set this to a poll interval, e.g --poll 700ms, to use a poll based approach to watch for file system changes
</span></span><span class=line><span class=cl>  -p, --port int                 port on which the server will listen (default 1313)
</span></span><span class=line><span class=cl>      --pprof                    enable the pprof server (port 8080)
</span></span><span class=line><span class=cl>      --printI18nWarnings        print missing translations
</span></span><span class=line><span class=cl>      --printMemoryUsage         print memory usage to screen at intervals
</span></span><span class=line><span class=cl>      --printPathWarnings        print warnings on duplicate target paths etc.
</span></span><span class=line><span class=cl>      --printUnusedTemplates     print warnings on unused templates.
</span></span><span class=line><span class=cl>      --renderSegments strings   named segments to render (configured in the segments config)
</span></span><span class=line><span class=cl>      --renderStaticToDisk       serve static files from disk and dynamic files from memory
</span></span><span class=line><span class=cl>      --templateMetrics          display metrics about template executions
</span></span><span class=line><span class=cl>      --templateMetricsHints     calculate some improvement hints when combined with --templateMetrics
</span></span><span class=line><span class=cl>  -t, --theme strings            themes to use (located in /themes/THEMENAME/)
</span></span><span class=line><span class=cl>      --tlsAuto                  generate and use locally-trusted certificates.
</span></span><span class=line><span class=cl>      --tlsCertFile string       path to TLS certificate file
</span></span><span class=line><span class=cl>      --tlsKeyFile string        path to TLS key file
</span></span><span class=line><span class=cl>      --trace file               write trace to file (not useful in general)
</span></span><span class=line><span class=cl>  -w, --watch                    watch filesystem for changes and recreate as needed (default true)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Global Flags:
</span></span><span class=line><span class=cl>      --clock string               set the clock used by Hugo, e.g. --clock 2021-11-06T22:30:00.00+09:00
</span></span><span class=line><span class=cl>      --config string              config file (default is hugo.yaml|json|toml)
</span></span><span class=line><span class=cl>      --configDir string           config dir (default &#34;config&#34;)
</span></span><span class=line><span class=cl>  -d, --destination string         filesystem path to write files to
</span></span><span class=line><span class=cl>  -e, --environment string         build environment
</span></span><span class=line><span class=cl>      --ignoreVendorPaths string   ignores any _vendor for module paths matching the given Glob pattern
</span></span><span class=line><span class=cl>      --logLevel string            log level (debug|info|warn|error)
</span></span><span class=line><span class=cl>      --noBuildLock                don&#39;t create .hugo_build.lock file
</span></span><span class=line><span class=cl>      --quiet                      build in quiet mode
</span></span><span class=line><span class=cl>  -M, --renderToMemory             render to memory (mostly useful when running the server)
</span></span><span class=line><span class=cl>  -s, --source string              filesystem path to read files relative from
</span></span><span class=line><span class=cl>      --themesDir string           filesystem path to themes directory
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Use &#34;hugo server [command] --help&#34; for more information about a command.
</span></span></code></pre></td></tr></table></div></div><p>Then I just use <code>transient-define-prefix</code> to create the command.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>transient</span>
</span></span><span class=line><span class=cl>  <span class=nb>:config</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>transient-define-prefix</span> <span class=nv>+config/transient-hugo-server</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;Run hugo server with </span><span class=ss>`transient&#39;</span><span class=s>.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>:man-page</span> <span class=s>&#34;hugo-server&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=s>&#34;Options&#34;</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;q&#34;</span> <span class=s>&#34;quit&#34;</span> <span class=nv>transient-quit-all</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-D&#34;</span> <span class=s>&#34;Build drafts&#34;</span> <span class=s>&#34;--buildDrafts&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-E&#34;</span> <span class=s>&#34;Build expired&#34;</span> <span class=s>&#34;--buildExpired&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-F&#34;</span> <span class=s>&#34;Build future&#34;</span> <span class=s>&#34;--buildFuture&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-d&#34;</span> <span class=s>&#34;Debug&#34;</span> <span class=s>&#34;--debug&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-B&#34;</span> <span class=s>&#34;Disable build errors on browser&#34;</span> <span class=s>&#34;--disableBrowserError&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-c&#34;</span> <span class=s>&#34;Clean destination dir&#34;</span> <span class=s>&#34;--cleanDestinationDir&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-e&#34;</span> <span class=s>&#34;Enable Git info&#34;</span> <span class=s>&#34;--enableGitInfo&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-F&#34;</span> <span class=s>&#34;enable full re-renders on changes&#34;</span> <span class=s>&#34;--disableFastRender&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-f&#34;</span> <span class=s>&#34;Force sync static files&#34;</span> <span class=s>&#34;--forceSyncStatic&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-g&#34;</span> <span class=s>&#34;enable to run some cleanup tasks&#34;</span> <span class=s>&#34;--gc&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-m&#34;</span> <span class=s>&#34;Minify any supported output format&#34;</span> <span class=s>&#34;--minify&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-C&#34;</span> <span class=s>&#34;No chmod&#34;</span> <span class=s>&#34;--noChmod&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-T&#34;</span> <span class=s>&#34;Don&#39;t sync modification time of files&#34;</span> <span class=s>&#34;--noTimes&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-I&#34;</span> <span class=s>&#34;Print missing translation&#34;</span> <span class=s>&#34;--printI18nWarnings&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-M&#34;</span> <span class=s>&#34;Print memory usage&#34;</span> <span class=s>&#34;--printMemoryUsage&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-P&#34;</span> <span class=s>&#34;Print warning on duplicate target path&#34;</span> <span class=s>&#34;--printPathWarnings&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-q&#34;</span> <span class=s>&#34;Quiet&#34;</span> <span class=s>&#34;--quiet&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-v&#34;</span> <span class=s>&#34;Verbose&#34;</span> <span class=s>&#34;--verbose&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;-w&#34;</span> <span class=s>&#34;Watch filesystem for changes&#34;</span> <span class=s>&#34;--watch&#34;</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=s>&#34;Action&#34;</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=s>&#34;s&#34;</span> <span class=s>&#34;hugo server&#34;</span> <span class=nv>+config/start-hugo-server</span><span class=p>)]))</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 11:</span>
install transient with use-package and define our hugo server command, see their <a href=https://github.com/positron-solutions/transient-showcase>showcase</a> to learn how to use <i>transient</i>. I use this heavily in the past.</div><p>Note that the &ldquo;Action&rdquo; (<code>s</code>) is <code>+config/start-hugo-server</code> which we need to define:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>+config/start-hugo-server</span> <span class=p>(</span><span class=nv>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Start hugo server in </span><span class=ss>`+config/blog-directory&#39;</span><span class=s>.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span> <span class=p>(</span><span class=nf>list</span> <span class=p>(</span><span class=nv>transient-args</span> <span class=ss>&#39;+config/transient-hugo-server</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nv>not</span> <span class=p>(</span><span class=nv>executable-find</span> <span class=s>&#34;hugo&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nf>message</span> <span class=s>&#34;hugo executable not found&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>default-directory</span> <span class=nv>+config/blog-directory</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>(</span><span class=nv>command</span> <span class=s>&#34;hugo server&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>async-shell-command</span> <span class=p>(</span><span class=nf>mapconcat</span> <span class=nf>#&#39;identity</span> <span class=o>`</span><span class=p>(</span><span class=o>,</span><span class=nv>command</span> <span class=o>,@</span><span class=nv>args</span><span class=p>)</span> <span class=s>&#34; &#34;</span><span class=p>)</span> <span class=s>&#34;*hugo*&#34;</span> <span class=s>&#34;*hugo-error*&#34;</span><span class=p>))))</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 12:</span>
the function</div><p>This function will run <code>hugo server</code>, with additional <code>args</code> which will be provided by the transient command.</p><ul><li><p>the <code>mapconcat</code> will apply the first argument to each element of the second arguments, for example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nf>mapconcat</span> <span class=nf>#&#39;identity</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;abc&#34;</span> <span class=s>&#34;def&#34;</span> <span class=s>&#34;ghi&#34;</span><span class=p>)</span> <span class=s>&#34;. &#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 13:</span>
mapconcat example</div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&#34;abc. def. ghi&#34;
</span></span></code></pre></td></tr></table></div></div></li><li><p>the <code>identity</code> simply returns the arguments unchanged.</p><figure><a href=/ox-hugo/transient.png><img loading=lazy src=/ox-hugo/transient.png alt="Figure 1: transient in action"></a><figcaption><p><span class=figure-number>Figure 1: </span>transient in action</p></figcaption></figure></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://orgmode.org/manual/Capture-templates.html>https://orgmode.org/manual/Capture-templates.html</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://orgmode.org/manual/Template-expansion.html>https://orgmode.org/manual/Template-expansion.html</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://ox-hugo.scripter.co/doc/org-meta-data-to-hugo-front-matter/>https://ox-hugo.scripter.co/doc/org-meta-data-to-hugo-front-matter/</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://orgmode.org/org.html#Activation-1>https://orgmode.org/org.html#Activation-1</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>See the <a href=https://magit.vc/manual/transient/>manual for transient</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://alexforsale.github.io/tags/hugo/>Hugo</a></li><li><a href=https://alexforsale.github.io/tags/emacs/>Emacs</a></li><li><a href=https://alexforsale.github.io/tags/org/>Org</a></li></ul><nav class=paginav><a class=prev href=https://alexforsale.github.io/posts/literate-configuration/><span class=title>« Prev</span><br><span>Literate Configuration with Emacs</span>
</a><a class=next href=https://alexforsale.github.io/posts/emacs-version-control/><span class=title>Next »</span><br><span>Emacs Version Control</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://alexforsale.github.io/>alexforsale.github.io</a></span>
<span><a href=https://github.com/alexforsale/alexforsale.github.io/ rel="noopener noreferrer" target=_blank>source</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>