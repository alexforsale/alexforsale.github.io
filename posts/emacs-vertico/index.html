<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Emacs vertico | alexforsale.github.io</title><meta name=keywords content="emacs,configuration,vertico"><meta name=description content="VERTical Interactive COmpletion"><meta name=author content="Kristian Alexander P"><link rel=canonical href=https://alexforsale.github.io/posts/emacs-vertico/><link crossorigin=anonymous href=/assets/css/stylesheet.c5de734fbd88c3d21543485ffbcb1ccdda89a86a780cf987fa00199c41dbc947.css integrity="sha256-xd5zT72Iw9IVQ0hf+8sczdqJqGp4DPmH+gAZnEHbyUc=" rel="preload stylesheet" as=style><link rel=icon href=https://alexforsale.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://alexforsale.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://alexforsale.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://alexforsale.github.io/apple-touch-icon.png><link rel=mask-icon href=https://alexforsale.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://alexforsale.github.io/posts/emacs-vertico/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Emacs vertico"><meta property="og:description" content="VERTical Interactive COmpletion"><meta property="og:type" content="article"><meta property="og:url" content="https://alexforsale.github.io/posts/emacs-vertico/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-23T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-28T08:44:46+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Emacs vertico"><meta name=twitter:description content="VERTical Interactive COmpletion"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://alexforsale.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Emacs vertico","item":"https://alexforsale.github.io/posts/emacs-vertico/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Emacs vertico","name":"Emacs vertico","description":"VERTical Interactive COmpletion","keywords":["emacs","configuration","vertico"],"articleBody":"Vertico provides a performant and minimalistic vertical completion UI based on the default completion system. The focus of Vertico is to provide a UI which behaves correctly under all circumstances. By reusing the built-in facilities system, Vertico achieves full compatibility with built-in Emacs completion commands and completion tables. Vertico only provides the completion UI but aims to be highly flexible, extendable and modular. Additional enhancements are available as extensions or complementary packages. The code base is small and maintainable. The main vertico.el package is only about 600 lines of code without white space and comments1.\nInstallation Figure 1: emacs without vertico\nFigure 2: emacs with vertico\nWith use-package 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 ;; Enable vertico (use-package vertico :init (vertico-mode) ;; Different scroll margin ;; (setq vertico-scroll-margin 0) ;; Show more candidates ;; (setq vertico-count 20) ;; Grow and shrink the Vertico minibuffer ;; (setq vertico-resize t) ;; Optionally enable cycling for `vertico-next' and `vertico-previous'. ;; (setq vertico-cycle t) ) ;; Persist history over Emacs restarts. Vertico sorts by history position. (use-package savehist :init (savehist-mode)) ;; A few more useful configurations... (use-package emacs :init ;; Add prompt indicator to `completing-read-multiple'. ;; We display [CRM], e.g., [CRM,] if the separator is a comma. (defun crm-indicator (args) (cons (format \"[CRM%s] %s\" (replace-regexp-in-string \"\\\\`\\\\[.*?]\\\\*\\\\|\\\\[.*?]\\\\*\\\\'\" \"\" crm-separator) (car args)) (cdr args))) (advice-add #'completing-read-multiple :filter-args #'crm-indicator) ;; Do not allow the cursor in the minibuffer prompt (setq minibuffer-prompt-properties '(read-only t cursor-intangible t face minibuffer-prompt)) (add-hook 'minibuffer-setup-hook #'cursor-intangible-mode) ;; Emacs 28: Hide commands in M-x which do not work in the current mode. ;; Vertico commands are hidden in normal buffers. (setq read-extended-command-predicate #'command-completion-default-include-p) ;; Enable recursive minibuffers (setq enable-recursive-minibuffers t)) vertico configuration vertico-scroll-margin Number of lines at the top and bottom when scrolling (default to 2). vertico-count Maximal number of candidates to show (default to 10). vertico-resize How to resize the vertico minibuffer window (default to the value of resize-mini-windows, which is 'grow-only). vertico-cycle enable cycling for vertico-next and vertico-previous, default to nil. Extensions The package also includes some extensions, they’re installed automatically if using package from ELPA.\nvertico-flat Flat, horizontal display for vertico, enable it with M-x vertico-flat-mode.\nFigure 3: vertico-flat-mode\nvertico-buffer vertico-buffer-mode to display Vertico like a regular buffer.\nFigure 4: vertico-buffer-mode\nvertico-directory Commands for Ido-like directory navigation. The commands can be bound in the vertico-map. Furthermore a cleanup function for shadowed file paths is provided.\n1 2 3 4 (keymap-set vertico-map \"RET\" #'vertico-directory-enter) (keymap-set vertico-map \"DEL\" #'vertico-directory-delete-char) (keymap-set vertico-map \"M-DEL\" #'vertico-directory-delete-word) (add-hook 'rfn-eshadow-update-overlay-hook #'vertico-directory-tidy) this way when opening file (via C-x C-f or with M-x find-file), pressing Backspace (or DEL), will automatically remove one directory up.\nvertico-grid Enables grid-display.\nFigure 5: vertico-grid-mode\nvertico-indexed-mode Select indexed candidates with prefix arguments.\nSelect the candidate number with M-, for example: to select candidate 2 press M-2 RET.\nvertico-mouse Support for scrolling and candidate selection.\nvertico-unobstrusive-mode Display only the topmost candidate. It is a simple derivative of vertico-flat-mode.\nvertico-suspend Suspend the current Vertico completion session. If vertico-suspend is called from within the currently active Vertico minibuffer, the completion session is suspended. Otherwise the last session is restored. It is possible to suspend multiple nested Vertico sessions. Note that vertico-suspend requires that recursive minibuffers are enabled by setting the customizable variable enable-recursive-minibuffers to t.\nvertico-reverse Reverse the list of candidates.\nFigure 7: vertico-reverse-mode\nvertico-repeat Enables repetition of Vertico sessions via the vertico-repeat, vertico-repeat-previous and vertico-repeat-select commands. If the repeat commands are called from an existing Vertico minibuffer session, only sessions corresponding to the current minibuffer command are offered via completion.\nIt is necessary to register a minibuffer setup hook, which saves the Vertico state for repetition. In order to save the history across Emacs sessions, enable savehist-mode and add vertico-repeat-history to savehist-additional-variables.\n1 2 3 4 5 6 7 (add-to-list 'savehist-additional-variables 'vertico-repeat-history) (keymap-global-set \"M-R\" #'vertico-repeat) (keymap-set vertico-map \"M-P\" #'vertico-repeat-previous) (keymap-set vertico-map \"M-N\" #'vertico-repeat-next) (keymap-set vertico-map \"S-\" #'vertico-repeat-previous) (keymap-set vertico-map \"S-\" #'vertico-repeat-next) (add-hook 'minibuffer-setup-hook #'vertico-repeat-save) vertico-quick Similar to vertico-indexed-mode, which prefixes candidates with quick keys. Typing these quick keys allows you to select the candidate in front of them. This is designed to be a faster alternative to selecting a candidate with vertico-next and vertico-previous.\n1 2 (keymap-set vertico-map \"M-q\" #'vertico-quick-insert) (keymap-set vertico-map \"C-q\" #'vertico-quick-exit) Pressing M-q while in vertico-map will show all the candidates, pressing C-q will exit the candidate selection.\nvertico-multiform Perhaps the most complex extensions, used for fine tuning the Vertico display and other minibuffer modes per command or completion category. For some commands you may want to use the vertico-buffer display and for completion categories like file you prefer the vertico-grid-mode.\n1 2 3 4 5 6 7 8 9 (setq vertico-multiform-commands '((consult-line buffer) (consult-imenu reverse buffer) (execute-extended-command flat))) (setq vertico-multiform-categories '((file buffer grid) (imenu (:not indexed mouse)) (symbol (vertico-sort-function . vertico-sort-alpha)))) (vertico-multiform-mode) Marginalia This package provides marginalia-mode which adds marginalia to the minibuffer completions. Marginalia are marks or annotations placed at the margin of the page of a book or in this case helpful colorful annotations placed at the margin of the minibuffer for your completion candidates. Marginalia can only add annotations to the completion candidates. It cannot modify the appearance of the candidates themselves, which are shown unaltered as supplied by the original command2.\nInstallation 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ;; Enable rich annotations using the Marginalia package (use-package marginalia ;; Bind `marginalia-cycle' locally in the minibuffer. To make the binding ;; available in the *Completions* buffer, add it to the ;; `completion-list-mode-map'. :bind (:map minibuffer-local-map (\"M-A\" . marginalia-cycle)) ;; The :init section is always executed. :init ;; Marginalia must be activated in the :init section of use-package such that ;; the mode gets enabled right away. Note that this forces loading the ;; package. (marginalia-mode)) Figure 9: Marginalia on find-file\nFigure 10: Marginalia on describe-variable\nAdding Icons in the minibuffer With additional package: all-the-icons-completion or nerd-icons-completion.\n1 2 3 4 (use-package nerd-icons-completion :hook (marginalia-mode . nerd-icons-completion-marginalia-setup) :config (nerd-icons-completion-mode)) Code Snippet 1: nerd-icons-completion 1 2 3 4 (use-package all-the-icons-completion :hook (marginalia-mode . all-the-icons-completion-marginalia-setup) :init (all-the-icons-completion-mode)) Code Snippet 2: all-the-icons-completion Figure 11: marginalia with nerd-icons-completion\nOrderless This package provides an orderless completion style that divides the pattern into space-separated components, and matches candidates that match all of the components in any order. Each component can match in any one of several ways: literally, as a regexp, as an initialism, in the flex style, or as multiple word prefixes. By default, regexp and literal matches are enabled3.\nInstallation 1 2 3 4 5 (use-package orderless :ensure t :custom (completion-styles '(orderless basic)) (completion-category-overrides '((file (styles basic partial-completion))))) Figure 12: orderless using the wiki completion-styles\nConsult Consult provides search and navigation commands based on the Emacs completion function completing-read. Completion allows you to quickly select an item from a list of candidates. Consult offers asynchronous and interactive consult-grep and consult-ripgrep commands, and the line-based search command consult-line. Furthermore Consult provides an advanced buffer switching command consult-buffer to switch between buffers, recently opened files, bookmarks and buffer-like candidates from other sources. Some of the Consult commands are enhanced versions of built-in Emacs commands. For example the command consult-imenu presents a flat list of the Imenu with live preview, grouping and narrowing. Please take a look at the full list of commands4.\nInstallation 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 (use-package consult ;; Replace bindings. Lazily loaded due by `use-package'. :bind (;; C-c bindings in `mode-specific-map' (\"C-c M-x\" . consult-mode-command) (\"C-c h\" . consult-history) (\"C-c k\" . consult-kmacro) (\"C-c m\" . consult-man) (\"C-c i\" . consult-info) ([remap Info-search] . consult-info) ;; C-x bindings in `ctl-x-map' (\"C-x M-:\" . consult-complex-command) ;; orig. repeat-complex-command (\"C-x b\" . consult-buffer) ;; orig. switch-to-buffer (\"C-x 4 b\" . consult-buffer-other-window) ;; orig. switch-to-buffer-other-window (\"C-x 5 b\" . consult-buffer-other-frame) ;; orig. switch-to-buffer-other-frame (\"C-x t b\" . consult-buffer-other-tab) ;; orig. switch-to-buffer-other-tab (\"C-x r b\" . consult-bookmark) ;; orig. bookmark-jump (\"C-x p b\" . consult-project-buffer) ;; orig. project-switch-to-buffer ;; Custom M-# bindings for fast register access (\"M-#\" . consult-register-load) (\"M-'\" . consult-register-store) ;; orig. abbrev-prefix-mark (unrelated) (\"C-M-#\" . consult-register) ;; Other custom bindings (\"M-y\" . consult-yank-pop) ;; orig. yank-pop ;; M-g bindings in `goto-map' (\"M-g e\" . consult-compile-error) (\"M-g f\" . consult-flymake) ;; Alternative: consult-flycheck (\"M-g g\" . consult-goto-line) ;; orig. goto-line (\"M-g M-g\" . consult-goto-line) ;; orig. goto-line (\"M-g o\" . consult-outline) ;; Alternative: consult-org-heading (\"M-g m\" . consult-mark) (\"M-g k\" . consult-global-mark) (\"M-g i\" . consult-imenu) (\"M-g I\" . consult-imenu-multi) ;; M-s bindings in `search-map' (\"M-s d\" . consult-find) ;; Alternative: consult-fd (\"M-s c\" . consult-locate) (\"M-s g\" . consult-grep) (\"M-s G\" . consult-git-grep) (\"M-s r\" . consult-ripgrep) (\"M-s l\" . consult-line) (\"M-s L\" . consult-line-multi) (\"M-s k\" . consult-keep-lines) (\"M-s u\" . consult-focus-lines) ;; Isearch integration (\"M-s e\" . consult-isearch-history) :map isearch-mode-map (\"M-e\" . consult-isearch-history) ;; orig. isearch-edit-string (\"M-s e\" . consult-isearch-history) ;; orig. isearch-edit-string (\"M-s l\" . consult-line) ;; needed by consult-line to detect isearch (\"M-s L\" . consult-line-multi) ;; needed by consult-line to detect isearch ;; Minibuffer history :map minibuffer-local-map (\"M-s\" . consult-history) ;; orig. next-matching-history-element (\"M-r\" . consult-history)) ;; orig. previous-matching-history-element ;; Enable automatic preview at point in the *Completions* buffer. This is ;; relevant when you use the default completion UI. :hook (completion-list-mode . consult-preview-at-point-mode) ;; The :init configuration is always executed (Not lazy) :init ;; Optionally configure the register formatting. This improves the register ;; preview for `consult-register', `consult-register-load', ;; `consult-register-store' and the Emacs built-ins. (setq register-preview-delay 0.5 register-preview-function #'consult-register-format) ;; Optionally tweak the register preview window. ;; This adds thin lines, sorting and hides the mode line of the window. (advice-add #'register-preview :override #'consult-register-window) ;; Use Consult to select xref locations with preview (setq xref-show-xrefs-function #'consult-xref xref-show-definitions-function #'consult-xref) ;; Configure other variables and modes in the :config section, ;; after lazily loading the package. :config ;; Optionally configure preview. The default value ;; is 'any, such that any key triggers the preview. ;; (setq consult-preview-key 'any) ;; (setq consult-preview-key \"M-.\") ;; (setq consult-preview-key '(\"S-\" \"S-\")) ;; For some commands and buffer sources it is useful to configure the ;; :preview-key on a per-command basis using the `consult-customize' macro. (consult-customize consult-theme :preview-key '(:debounce 0.2 any) consult-ripgrep consult-git-grep consult-grep consult-bookmark consult-recent-file consult-xref consult--source-bookmark consult--source-file-register consult--source-recent-file consult--source-project-recent-file ;; :preview-key \"M-.\" :preview-key '(:debounce 0.4 any)) ;; Optionally configure the narrowing key. ;; Both \u003c and C-+ work reasonably well. (setq consult-narrow-key \"\u003c\") ;; \"C-+\" ;; Optionally make narrowing help available in the minibuffer. ;; You may want to use `embark-prefix-help-command' or which-key instead. ;; (define-key consult-narrow-map (vconcat consult-narrow-key \"?\") #'consult-narrow-help) ;; By default `consult-project-function' uses `project-root' from project.el. ;; Optionally configure a different project root function. ;;;; 1. project.el (the default) ;; (setq consult-project-function #'consult--default-project--function) ;;;; 2. vc.el (vc-root-dir) ;; (setq consult-project-function (lambda (_) (vc-root-dir))) ;;;; 3. locate-dominating-file ;; (setq consult-project-function (lambda (_) (locate-dominating-file \".\" \".git\"))) ;;;; 4. projectile.el (projectile-project-root) ;; (autoload 'projectile-project-root \"projectile\") ;; (setq consult-project-function (lambda (_) (projectile-project-root))) ;;;; 5. No project support ;; (setq consult-project-function nil) ) Figure 13: consult-buffer\nFigure 14: consult-flymake\nFigure 15: consult-yank-pop\nFigure 16: consult-outline\nCorfu Corfu enhances in-buffer completion with a small completion popup. The current candidates are shown in a popup below or above the point. The candidates can be selected by moving up and down. Corfu is the minimalistic in-buffer completion counterpart of the Vertico minibuffer UI5.\nInstallation 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 (use-package corfu ;; Optional customizations ;; :custom ;; (corfu-cycle t) ;; Enable cycling for `corfu-next/previous' ;; (corfu-auto t) ;; Enable auto completion ;; (corfu-separator ?\\s) ;; Orderless field separator ;; (corfu-quit-at-boundary nil) ;; Never quit at completion boundary ;; (corfu-quit-no-match nil) ;; Never quit, even if there is no match ;; (corfu-preview-current nil) ;; Disable current candidate preview ;; (corfu-preselect 'prompt) ;; Preselect the prompt ;; (corfu-on-exact-match nil) ;; Configure handling of exact matches ;; (corfu-scroll-margin 5) ;; Use scroll margin ;; Enable Corfu only for certain modes. ;; :hook ((prog-mode . corfu-mode) ;; (shell-mode . corfu-mode) ;; (eshell-mode . corfu-mode)) ;; Recommended: Enable Corfu globally. This is recommended since Dabbrev can ;; be used globally (M-/). See also the customization variable ;; `global-corfu-modes' to exclude certain modes. :init (global-corfu-mode)) ;; A few more useful configurations... (use-package emacs :init ;; TAB cycle if there are only few candidates (setq completion-cycle-threshold 3) ;; Emacs 28: Hide commands in M-x which do not apply to the current mode. ;; Corfu commands are hidden, since they are not supposed to be used via M-x. ;; (setq read-extended-command-predicate ;; #'command-completion-default-include-p) ;; Enable indentation+completion using the TAB key. ;; `completion-at-point' is often bound to M-TAB. (setq tab-always-indent 'complete)) ;; Use Dabbrev with Corfu! (use-package dabbrev ;; Swap M-/ and C-M-/ :bind ((\"M-/\" . dabbrev-completion) (\"C-M-/\" . dabbrev-expand)) :config (add-to-list 'dabbrev-ignored-buffer-regexps \"\\\\` \") ;; Since 29.1, use `dabbrev-ignored-buffer-regexps' on older. (add-to-list 'dabbrev-ignored-buffer-modes 'doc-view-mode) (add-to-list 'dabbrev-ignored-buffer-modes 'pdf-view-mode) Figure 17: corfu completion\nBy default, when typing, press TAB to start the completion, use C-p or C-n (C-j or C-k can also be used).\nEnable completion in the minibuffer 1 2 3 4 5 6 7 8 9 10 (defun corfu-enable-always-in-minibuffer () \"Enable Corfu in the minibuffer if Vertico/Mct are not active.\" (unless (or (bound-and-true-p mct--active) (bound-and-true-p vertico--input) (eq (current-local-map) read-passwd-map)) ;; (setq-local corfu-auto nil) ;; Enable/disable auto completion (setq-local corfu-echo-delay nil ;; Disable automatic echo and popup corfu-popupinfo-delay nil) (corfu-mode 1))) (add-hook 'minibuffer-setup-hook #'corfu-enable-always-in-minibuffer 1) This will enable corfu as long as there’s no other completion active.\nnerd-icons-corfu Nerd-icons-corfu.el is a library for adding icons to completions in Corfu. It uses nerd-icons.el under the hood and, as such, works on both GUI and terminal6.\n1 2 3 4 5 6 7 8 9 (use-package nerd-icons-corfu :ensure :config (add-to-list 'corfu-margin-formatters #'nerd-icons-corfu-formatter) (setq nerd-icons-corfu-mapping '((array :style \"cod\" :icon \"symbol_array\" :face font-lock-type-face) (boolean :style \"cod\" :icon \"symbol_boolean\" :face font-lock-builtin-face) ;; ... (t :style \"cod\" :icon \"code\" :face font-lock-warning-face)))) Figure 18: nerd-icons-corfu\nCape Cape provides Completion At Point Extensions which can be used in combination with Corfu, Company or the default completion UI. The completion backends used by completion-at-point are so called completion-at-point-functions (Capfs)7.\nConfiguration 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 ;; Add extensions (use-package cape ;; Bind dedicated completion commands ;; Alternative prefix keys: C-c p, M-p, M-+, ... :bind ((\"C-c p p\" . completion-at-point) ;; capf (\"C-c p t\" . complete-tag) ;; etags (\"C-c p d\" . cape-dabbrev) ;; or dabbrev-completion (\"C-c p h\" . cape-history) (\"C-c p f\" . cape-file) (\"C-c p k\" . cape-keyword) (\"C-c p s\" . cape-elisp-symbol) (\"C-c p e\" . cape-elisp-block) (\"C-c p a\" . cape-abbrev) (\"C-c p l\" . cape-line) (\"C-c p w\" . cape-dict) (\"C-c p :\" . cape-emoji) (\"C-c p \\\\\" . cape-tex) (\"C-c p _\" . cape-tex) (\"C-c p ^\" . cape-tex) (\"C-c p \u0026\" . cape-sgml) (\"C-c p r\" . cape-rfc1345)) :init ;; Add to the global default value of `completion-at-point-functions' which is ;; used by `completion-at-point'. The order of the functions matters, the ;; first function returning a result wins. Note that the list of buffer-local ;; completion functions takes precedence over the global list. (add-to-list 'completion-at-point-functions #'cape-dabbrev) (add-to-list 'completion-at-point-functions #'cape-file) (add-to-list 'completion-at-point-functions #'cape-elisp-block) ;;(add-to-list 'completion-at-point-functions #'cape-history) ;;(add-to-list 'completion-at-point-functions #'cape-keyword) ;;(add-to-list 'completion-at-point-functions #'cape-tex) ;;(add-to-list 'completion-at-point-functions #'cape-sgml) ;;(add-to-list 'completion-at-point-functions #'cape-rfc1345) ;;(add-to-list 'completion-at-point-functions #'cape-abbrev) ;;(add-to-list 'completion-at-point-functions #'cape-dict) ;;(add-to-list 'completion-at-point-functions #'cape-elisp-symbol) ;;(add-to-list 'completion-at-point-functions #'cape-line) ) https://github.com/minad/vertico ↩︎\nhttps://github.com/minad/marginalia ↩︎\nhttps://github.com/oantolin/orderless ↩︎\nhttps://github.com/minad/consult ↩︎\nhttps://github.com/minad/corfu ↩︎\nhttps://github.com/LuigiPiucco/nerd-icons-corfu ↩︎\nhttps://github.com/minad/cape ↩︎\n","wordCount":"2735","inLanguage":"en","datePublished":"2024-02-23T00:00:00Z","dateModified":"2025-07-28T08:44:46Z","author":[{"@type":"Person","name":"Kristian Alexander P"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://alexforsale.github.io/posts/emacs-vertico/"},"publisher":{"@type":"Organization","name":"alexforsale.github.io","logo":{"@type":"ImageObject","url":"https://alexforsale.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://alexforsale.github.io/ accesskey=h title="alexforsale.github.io (Alt + H)">alexforsale.github.io</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://alexforsale.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://alexforsale.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://alexforsale.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://alexforsale.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://alexforsale.github.io/about/ title=about><span>about</span></a></li><li><a href=https://alexforsale.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://alexforsale.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://alexforsale.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Emacs vertico</h1><div class=post-description>VERTical Interactive COmpletion</div><div class=post-meta><span title='2024-02-23 00:00:00 +0000 UTC'>February 23, 2024</span>&nbsp;·&nbsp;<span title='2025-07-28 08:44:46 +0000 UTC'>(updated July 28, 2025)</span>&nbsp;·&nbsp;13 min&nbsp;·&nbsp;2735 words&nbsp;·&nbsp;Kristian Alexander P</div></header><div class=post-content><p>Vertico provides a performant and minimalistic vertical completion UI based on the default completion system. The focus of Vertico is to provide a UI which behaves correctly under all circumstances. By reusing the built-in facilities system, Vertico achieves full compatibility with built-in Emacs completion commands and completion tables. Vertico only provides the completion UI but aims to be highly flexible, extendable and modular. Additional enhancements are available as extensions or complementary packages. The code base is small and maintainable. The main vertico.el package is only about 600 lines of code without white space and comments<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><h2 id=installation>Installation<a hidden class=anchor aria-hidden=true href=#installation>#</a></h2><figure><a href=/ox-hugo/emacs-without-vertico.png><img loading=lazy src=/ox-hugo/emacs-without-vertico.png alt="Figure 1: emacs without vertico"></a><figcaption><p><span class=figure-number>Figure 1: </span>emacs without vertico</p></figcaption></figure><figure><a href=/ox-hugo/emacs-vertico.png><img loading=lazy src=/ox-hugo/emacs-vertico.png alt="Figure 2: emacs with vertico"></a><figcaption><p><span class=figure-number>Figure 2: </span>emacs with vertico</p></figcaption></figure><h3 id=with-use-package>With <code>use-package</code><a hidden class=anchor aria-hidden=true href=#with-use-package>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=c1>;; Enable vertico</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>vertico</span>
</span></span><span class=line><span class=cl>  <span class=nb>:init</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>vertico-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Different scroll margin</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq vertico-scroll-margin 0)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Show more candidates</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq vertico-count 20)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Grow and shrink the Vertico minibuffer</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq vertico-resize t)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Optionally enable cycling for `vertico-next&#39; and `vertico-previous&#39;.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq vertico-cycle t)</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; Persist history over Emacs restarts. Vertico sorts by history position.</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>savehist</span>
</span></span><span class=line><span class=cl>  <span class=nb>:init</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>savehist-mode</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; A few more useful configurations...</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>emacs</span>
</span></span><span class=line><span class=cl>  <span class=nb>:init</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Add prompt indicator to `completing-read-multiple&#39;.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; We display [CRM&lt;separator&gt;], e.g., [CRM,] if the separator is a comma.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>defun</span> <span class=nv>crm-indicator</span> <span class=p>(</span><span class=nv>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>cons</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;[CRM%s] %s&#34;</span>
</span></span><span class=line><span class=cl>                  <span class=p>(</span><span class=nv>replace-regexp-in-string</span>
</span></span><span class=line><span class=cl>                   <span class=s>&#34;\\`\\[.*?]\\*\\|\\[.*?]\\*\\&#39;&#34;</span> <span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>                   <span class=nv>crm-separator</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                  <span class=p>(</span><span class=nf>car</span> <span class=nv>args</span><span class=p>))</span>
</span></span><span class=line><span class=cl>          <span class=p>(</span><span class=nf>cdr</span> <span class=nv>args</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>advice-add</span> <span class=nf>#&#39;</span><span class=nv>completing-read-multiple</span> <span class=nb>:filter-args</span> <span class=nf>#&#39;</span><span class=nv>crm-indicator</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Do not allow the cursor in the minibuffer prompt</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>minibuffer-prompt-properties</span>
</span></span><span class=line><span class=cl>        <span class=o>&#39;</span><span class=p>(</span><span class=nv>read-only</span> <span class=no>t</span> <span class=nv>cursor-intangible</span> <span class=no>t</span> <span class=nv>face</span> <span class=nf>minibuffer-prompt</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;minibuffer-setup-hook</span> <span class=nf>#&#39;</span><span class=nv>cursor-intangible-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Emacs 28: Hide commands in M-x which do not work in the current mode.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Vertico commands are hidden in normal buffers.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>read-extended-command-predicate</span>
</span></span><span class=line><span class=cl>        <span class=nf>#&#39;</span><span class=nv>command-completion-default-include-p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Enable recursive minibuffers</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>enable-recursive-minibuffers</span> <span class=no>t</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=vertico-configuration>vertico configuration<a hidden class=anchor aria-hidden=true href=#vertico-configuration>#</a></h4><dl><dt><code>vertico-scroll-margin</code></dt><dd>Number of lines at the top and bottom when scrolling (default to 2).</dd><dt><code>vertico-count</code></dt><dd>Maximal number of candidates to show (default to 10).</dd><dt><code>vertico-resize</code></dt><dd>How to resize the <code>vertico</code> minibuffer window (default to the value of <code>resize-mini-windows</code>, which is <code>'grow-only</code>).</dd><dt><code>vertico-cycle</code></dt><dd>enable cycling for <code>vertico-next</code> and <code>vertico-previous</code>, default to <code>nil</code>.</dd></dl><h2 id=extensions>Extensions<a hidden class=anchor aria-hidden=true href=#extensions>#</a></h2><p>The package also includes some extensions, they&rsquo;re installed automatically if using package from <code>ELPA</code>.</p><h3 id=vertico-flat><code>vertico-flat</code><a hidden class=anchor aria-hidden=true href=#vertico-flat>#</a></h3><p>Flat, horizontal display for <code>vertico</code>, enable it with <code>M-x vertico-flat-mode</code>.</p><figure><a href=/ox-hugo/vertico-flat-mode.png><img loading=lazy src=/ox-hugo/vertico-flat-mode.png alt="Figure 3: vertico-flat-mode"></a><figcaption><p><span class=figure-number>Figure 3: </span>vertico-flat-mode</p></figcaption></figure><h3 id=vertico-buffer><code>vertico-buffer</code><a hidden class=anchor aria-hidden=true href=#vertico-buffer>#</a></h3><p><code>vertico-buffer-mode</code> to display Vertico like a regular buffer.</p><figure><a href=/ox-hugo/vertico-buffer-mode.png><img loading=lazy src=/ox-hugo/vertico-buffer-mode.png alt="Figure 4: vertico-buffer-mode"></a><figcaption><p><span class=figure-number>Figure 4: </span>vertico-buffer-mode</p></figcaption></figure><h3 id=vertico-directory><code>vertico-directory</code><a hidden class=anchor aria-hidden=true href=#vertico-directory>#</a></h3><p>Commands for Ido-like directory navigation. The commands can be bound in the <code>vertico-map</code>. Furthermore a cleanup function for shadowed file paths is provided.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-set</span> <span class=nv>vertico-map</span> <span class=s>&#34;RET&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-directory-enter</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-set</span> <span class=nv>vertico-map</span> <span class=s>&#34;DEL&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-directory-delete-char</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-set</span> <span class=nv>vertico-map</span> <span class=s>&#34;M-DEL&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-directory-delete-word</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;rfn-eshadow-update-overlay-hook</span> <span class=nf>#&#39;</span><span class=nv>vertico-directory-tidy</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>this way when opening file (via <code>C-x C-f</code> or with <code>M-x find-file</code>), pressing <code>Backspace</code> (or <code>DEL</code>), will automatically remove one directory up.</p><h3 id=vertico-grid><code>vertico-grid</code><a hidden class=anchor aria-hidden=true href=#vertico-grid>#</a></h3><p>Enables grid-display.</p><figure><a href=./vertico-grid-mode><img loading=lazy src=/ox-hugo/vertico-grid-mode.png alt="Figure 5: vertico-grid-mode"></a><figcaption><p><span class=figure-number>Figure 5: </span>vertico-grid-mode</p></figcaption></figure><h3 id=vertico-indexed-mode><code>vertico-indexed-mode</code><a hidden class=anchor aria-hidden=true href=#vertico-indexed-mode>#</a></h3><p>Select indexed candidates with prefix arguments.</p><p><a href=./vertico-indexed-mode><img loading=lazy src=/ox-hugo/vertico-indexed-mode.png alt>
</a>Select the candidate number with <code>M-&lt;candidate></code>, for example: to select candidate <code>2</code> press <code>M-2 RET</code>.</p><h3 id=vertico-mouse><code>vertico-mouse</code><a hidden class=anchor aria-hidden=true href=#vertico-mouse>#</a></h3><p>Support for scrolling and candidate selection.</p><h3 id=vertico-unobstrusive-mode><code>vertico-unobstrusive-mode</code><a hidden class=anchor aria-hidden=true href=#vertico-unobstrusive-mode>#</a></h3><p>Display only the topmost candidate. It is a simple derivative of <code>vertico-flat-mode</code>.</p><h3 id=vertico-suspend><code>vertico-suspend</code><a hidden class=anchor aria-hidden=true href=#vertico-suspend>#</a></h3><p>Suspend the current Vertico completion session. If <code>vertico-suspend</code> is called from within the currently active Vertico minibuffer, the completion session is suspended. Otherwise the last session is restored. It is possible to suspend multiple nested Vertico sessions. Note that <code>vertico-suspend</code> requires that recursive minibuffers are enabled by setting the customizable variable <code>enable-recursive-minibuffers</code> to <code>t</code>.</p><h3 id=vertico-reverse><code>vertico-reverse</code><a hidden class=anchor aria-hidden=true href=#vertico-reverse>#</a></h3><p>Reverse the list of candidates.</p><figure><a href=/ox-hugo/vertico-reverse-mode.png><img loading=lazy src=/ox-hugo/vertico-reverse-mode.png alt="Figure 7: vertico-reverse-mode"></a><figcaption><p><span class=figure-number>Figure 7: </span>vertico-reverse-mode</p></figcaption></figure><h3 id=vertico-repeat><code>vertico-repeat</code><a hidden class=anchor aria-hidden=true href=#vertico-repeat>#</a></h3><p>Enables repetition of Vertico sessions via the <code>vertico-repeat</code>, <code>vertico-repeat-previous</code> and <code>vertico-repeat-select</code> commands. If the repeat commands are called from an existing Vertico minibuffer session, only sessions corresponding to the current minibuffer command are offered via completion.</p><p>It is necessary to register a minibuffer setup hook, which saves the Vertico state for repetition. In order to save the history across Emacs sessions, enable <code>savehist-mode</code> and add <code>vertico-repeat-history</code> to <code>savehist-additional-variables</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;savehist-additional-variables</span> <span class=ss>&#39;vertico-repeat-history</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-global-set</span> <span class=s>&#34;M-R&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-repeat</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-set</span> <span class=nv>vertico-map</span> <span class=s>&#34;M-P&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-repeat-previous</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-set</span> <span class=nv>vertico-map</span> <span class=s>&#34;M-N&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-repeat-next</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-set</span> <span class=nv>vertico-map</span> <span class=s>&#34;S-&lt;prior&gt;&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-repeat-previous</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-set</span> <span class=nv>vertico-map</span> <span class=s>&#34;S-&lt;next&gt;&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-repeat-next</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;minibuffer-setup-hook</span> <span class=nf>#&#39;</span><span class=nv>vertico-repeat-save</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=vertico-quick><code>vertico-quick</code><a hidden class=anchor aria-hidden=true href=#vertico-quick>#</a></h3><p>Similar to <code>vertico-indexed-mode</code>, which prefixes candidates with quick keys. Typing these quick keys allows you to select the candidate in front of them. This is designed to be a faster alternative to selecting a candidate with <code>vertico-next</code> and <code>vertico-previous</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-set</span> <span class=nv>vertico-map</span> <span class=s>&#34;M-q&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-quick-insert</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>keymap-set</span> <span class=nv>vertico-map</span> <span class=s>&#34;C-q&#34;</span> <span class=nf>#&#39;</span><span class=nv>vertico-quick-exit</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><a href=/ox-hugo/vertico-quick.png><img loading=lazy src=/ox-hugo/vertico-quick.png alt>
</a>Pressing <code>M-q</code> while in <code>vertico-map</code> will show all the candidates, pressing <code>C-q</code> will exit the candidate selection.</p><h3 id=vertico-multiform><code>vertico-multiform</code><a hidden class=anchor aria-hidden=true href=#vertico-multiform>#</a></h3><p>Perhaps the most complex extensions, used for fine tuning the Vertico display and other minibuffer modes per command or completion category. For some commands you may want to use the <code>vertico-buffer</code> display and for completion categories like file you prefer the <code>vertico-grid-mode</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>vertico-multiform-commands</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=nv>consult-line</span> <span class=nv>buffer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nv>consult-imenu</span> <span class=nf>reverse</span> <span class=nv>buffer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nv>execute-extended-command</span> <span class=nv>flat</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>vertico-multiform-categories</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=nv>file</span> <span class=nv>buffer</span> <span class=nv>grid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nv>imenu</span> <span class=p>(</span><span class=nb>:not</span> <span class=nv>indexed</span> <span class=nv>mouse</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nv>symbol</span> <span class=p>(</span><span class=nv>vertico-sort-function</span> <span class=o>.</span> <span class=nv>vertico-sort-alpha</span><span class=p>))))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>vertico-multiform-mode</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=marginalia>Marginalia<a hidden class=anchor aria-hidden=true href=#marginalia>#</a></h2><p>This package provides <code>marginalia-mode</code> which adds marginalia to the minibuffer completions. <a href=https://en.wikipedia.org/wiki/Marginalia>Marginalia</a> are marks or annotations placed at the margin of the page of a book or in this case helpful colorful annotations placed at the margin of the minibuffer for your completion candidates. Marginalia can only add annotations to the completion candidates. It cannot modify the appearance of the candidates themselves, which are shown unaltered as supplied by the original command<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</p><h3 id=installation>Installation<a hidden class=anchor aria-hidden=true href=#installation>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=c1>;; Enable rich annotations using the Marginalia package</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>marginalia</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Bind `marginalia-cycle&#39; locally in the minibuffer.  To make the binding</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; available in the *Completions* buffer, add it to the</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; `completion-list-mode-map&#39;.</span>
</span></span><span class=line><span class=cl>  <span class=nb>:bind</span> <span class=p>(</span><span class=nb>:map</span> <span class=nv>minibuffer-local-map</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-A&#34;</span> <span class=o>.</span> <span class=nv>marginalia-cycle</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>;; The :init section is always executed.</span>
</span></span><span class=line><span class=cl>  <span class=nb>:init</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>;; Marginalia must be activated in the :init section of use-package such that</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; the mode gets enabled right away. Note that this forces loading the</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; package.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>marginalia-mode</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><figure><a href=/ox-hugo/marginalia-files.png><img loading=lazy src=/ox-hugo/marginalia-files.png alt="Figure 9: Marginalia on find-file"></a><figcaption><p><span class=figure-number>Figure 9: </span>Marginalia on find-file</p></figcaption></figure><figure><a href=/ox-hugo/marginalia-describe-variable.png><img loading=lazy src=/ox-hugo/marginalia-describe-variable.png alt="Figure 10: Marginalia on describe-variable"></a><figcaption><p><span class=figure-number>Figure 10: </span>Marginalia on describe-variable</p></figcaption></figure><h3 id=adding-icons-in-the-minibuffer>Adding Icons in the minibuffer<a hidden class=anchor aria-hidden=true href=#adding-icons-in-the-minibuffer>#</a></h3><p>With additional package: <a href=https://github.com/iyefrat/all-the-icons-completion>all-the-icons-completion</a> or <a href=https://github.com/rainstormstudio/nerd-icons-completion>nerd-icons-completion</a>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>nerd-icons-completion</span>
</span></span><span class=line><span class=cl>  <span class=nb>:hook</span> <span class=p>(</span><span class=nv>marginalia-mode</span> <span class=o>.</span> <span class=nv>nerd-icons-completion-marginalia-setup</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nb>:config</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>nerd-icons-completion-mode</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 1:</span>
nerd-icons-completion</div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>all-the-icons-completion</span>
</span></span><span class=line><span class=cl>  <span class=nb>:hook</span> <span class=p>(</span><span class=nv>marginalia-mode</span> <span class=o>.</span> <span class=nv>all-the-icons-completion-marginalia-setup</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nb>:init</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>all-the-icons-completion-mode</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><div class=src-block-caption><span class=src-block-number>Code Snippet 2:</span>
all-the-icons-completion</div><figure><a href=/ox-hugo/marginalia-find-file-with-icons.png><img loading=lazy src=/ox-hugo/marginalia-find-file-with-icons.png alt="Figure 11: marginalia with nerd-icons-completion"></a><figcaption><p><span class=figure-number>Figure 11: </span>marginalia with nerd-icons-completion</p></figcaption></figure><h2 id=orderless>Orderless<a hidden class=anchor aria-hidden=true href=#orderless>#</a></h2><p>This package provides an <code>orderless</code> completion style that divides the pattern into space-separated components, and matches candidates that match all of the components in any order. Each component can match in any one of several ways: literally, as a regexp, as an initialism, in the flex style, or as multiple word prefixes. By default, regexp and literal matches are enabled<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>.</p><h3 id=installation>Installation<a hidden class=anchor aria-hidden=true href=#installation>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>orderless</span>
</span></span><span class=line><span class=cl>  <span class=nb>:ensure</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>  <span class=nb>:custom</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>completion-styles</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>orderless</span> <span class=nv>basic</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>completion-category-overrides</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>file</span> <span class=p>(</span><span class=nv>styles</span> <span class=nv>basic</span> <span class=nv>partial-completion</span><span class=p>)))))</span>
</span></span></code></pre></td></tr></table></div></div><figure><a href=/ox-hugo/orderless-default.png><img loading=lazy src=/ox-hugo/orderless-default.png alt="Figure 12: orderless using the wiki completion-styles"></a><figcaption><p><span class=figure-number>Figure 12: </span>orderless using the wiki completion-styles</p></figcaption></figure><h2 id=consult>Consult<a hidden class=anchor aria-hidden=true href=#consult>#</a></h2><p>Consult provides search and navigation commands based on the Emacs completion function <a href=https://www.gnu.org/software/emacs/manual/html_node/elisp/Minibuffer-Completion.html>completing-read</a>. Completion allows you to quickly select an item from a list of candidates. Consult offers asynchronous and interactive <code>consult-grep</code> and <code>consult-ripgrep</code> commands, and the line-based search command <code>consult-line</code>. Furthermore Consult provides an advanced buffer switching command <code>consult-buffer</code> to switch between buffers, recently opened files, bookmarks and buffer-like candidates from other sources. Some of the Consult commands are enhanced versions of built-in Emacs commands. For example the command <code>consult-imenu</code> presents a flat list of the Imenu with <a href=https://github.com/minad/consult#live-previews>live preview</a>, <a href=https://github.com/minad/consult#narrowing-and-grouping>grouping and narrowing</a>. Please take a look at the <a href=https://github.com/minad/consult#available-commands>full list of commands</a><sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>.</p><h3 id=installation>Installation<a hidden class=anchor aria-hidden=true href=#installation>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>consult</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Replace bindings. Lazily loaded due by `use-package&#39;.</span>
</span></span><span class=line><span class=cl>  <span class=nb>:bind</span> <span class=p>(</span><span class=c1>;; C-c bindings in `mode-specific-map&#39;</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c M-x&#34;</span> <span class=o>.</span> <span class=nv>consult-mode-command</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c h&#34;</span> <span class=o>.</span> <span class=nv>consult-history</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c k&#34;</span> <span class=o>.</span> <span class=nv>consult-kmacro</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c m&#34;</span> <span class=o>.</span> <span class=nv>consult-man</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c i&#34;</span> <span class=o>.</span> <span class=nv>consult-info</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>([</span><span class=nv>remap</span> <span class=nv>Info-search</span><span class=p>]</span> <span class=o>.</span> <span class=nv>consult-info</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=c1>;; C-x bindings in `ctl-x-map&#39;</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-x M-:&#34;</span> <span class=o>.</span> <span class=nv>consult-complex-command</span><span class=p>)</span>     <span class=c1>;; orig. repeat-complex-command</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-x b&#34;</span> <span class=o>.</span> <span class=nv>consult-buffer</span><span class=p>)</span>                <span class=c1>;; orig. switch-to-buffer</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-x 4 b&#34;</span> <span class=o>.</span> <span class=nv>consult-buffer-other-window</span><span class=p>)</span> <span class=c1>;; orig. switch-to-buffer-other-window</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-x 5 b&#34;</span> <span class=o>.</span> <span class=nv>consult-buffer-other-frame</span><span class=p>)</span>  <span class=c1>;; orig. switch-to-buffer-other-frame</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-x t b&#34;</span> <span class=o>.</span> <span class=nv>consult-buffer-other-tab</span><span class=p>)</span>    <span class=c1>;; orig. switch-to-buffer-other-tab</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-x r b&#34;</span> <span class=o>.</span> <span class=nv>consult-bookmark</span><span class=p>)</span>            <span class=c1>;; orig. bookmark-jump</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-x p b&#34;</span> <span class=o>.</span> <span class=nv>consult-project-buffer</span><span class=p>)</span>      <span class=c1>;; orig. project-switch-to-buffer</span>
</span></span><span class=line><span class=cl>         <span class=c1>;; Custom M-# bindings for fast register access</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-#&#34;</span> <span class=o>.</span> <span class=nv>consult-register-load</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-&#39;&#34;</span> <span class=o>.</span> <span class=nv>consult-register-store</span><span class=p>)</span>          <span class=c1>;; orig. abbrev-prefix-mark (unrelated)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-M-#&#34;</span> <span class=o>.</span> <span class=nv>consult-register</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=c1>;; Other custom bindings</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-y&#34;</span> <span class=o>.</span> <span class=nv>consult-yank-pop</span><span class=p>)</span>                <span class=c1>;; orig. yank-pop</span>
</span></span><span class=line><span class=cl>         <span class=c1>;; M-g bindings in `goto-map&#39;</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-g e&#34;</span> <span class=o>.</span> <span class=nv>consult-compile-error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-g f&#34;</span> <span class=o>.</span> <span class=nv>consult-flymake</span><span class=p>)</span>               <span class=c1>;; Alternative: consult-flycheck</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-g g&#34;</span> <span class=o>.</span> <span class=nv>consult-goto-line</span><span class=p>)</span>             <span class=c1>;; orig. goto-line</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-g M-g&#34;</span> <span class=o>.</span> <span class=nv>consult-goto-line</span><span class=p>)</span>           <span class=c1>;; orig. goto-line</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-g o&#34;</span> <span class=o>.</span> <span class=nv>consult-outline</span><span class=p>)</span>               <span class=c1>;; Alternative: consult-org-heading</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-g m&#34;</span> <span class=o>.</span> <span class=nv>consult-mark</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-g k&#34;</span> <span class=o>.</span> <span class=nv>consult-global-mark</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-g i&#34;</span> <span class=o>.</span> <span class=nv>consult-imenu</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-g I&#34;</span> <span class=o>.</span> <span class=nv>consult-imenu-multi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=c1>;; M-s bindings in `search-map&#39;</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s d&#34;</span> <span class=o>.</span> <span class=nv>consult-find</span><span class=p>)</span>                  <span class=c1>;; Alternative: consult-fd</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s c&#34;</span> <span class=o>.</span> <span class=nv>consult-locate</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s g&#34;</span> <span class=o>.</span> <span class=nv>consult-grep</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s G&#34;</span> <span class=o>.</span> <span class=nv>consult-git-grep</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s r&#34;</span> <span class=o>.</span> <span class=nv>consult-ripgrep</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s l&#34;</span> <span class=o>.</span> <span class=nv>consult-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s L&#34;</span> <span class=o>.</span> <span class=nv>consult-line-multi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s k&#34;</span> <span class=o>.</span> <span class=nv>consult-keep-lines</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s u&#34;</span> <span class=o>.</span> <span class=nv>consult-focus-lines</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=c1>;; Isearch integration</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s e&#34;</span> <span class=o>.</span> <span class=nv>consult-isearch-history</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=nb>:map</span> <span class=nv>isearch-mode-map</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-e&#34;</span> <span class=o>.</span> <span class=nv>consult-isearch-history</span><span class=p>)</span>         <span class=c1>;; orig. isearch-edit-string</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s e&#34;</span> <span class=o>.</span> <span class=nv>consult-isearch-history</span><span class=p>)</span>       <span class=c1>;; orig. isearch-edit-string</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s l&#34;</span> <span class=o>.</span> <span class=nv>consult-line</span><span class=p>)</span>                  <span class=c1>;; needed by consult-line to detect isearch</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s L&#34;</span> <span class=o>.</span> <span class=nv>consult-line-multi</span><span class=p>)</span>            <span class=c1>;; needed by consult-line to detect isearch</span>
</span></span><span class=line><span class=cl>         <span class=c1>;; Minibuffer history</span>
</span></span><span class=line><span class=cl>         <span class=nb>:map</span> <span class=nv>minibuffer-local-map</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-s&#34;</span> <span class=o>.</span> <span class=nv>consult-history</span><span class=p>)</span>                 <span class=c1>;; orig. next-matching-history-element</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;M-r&#34;</span> <span class=o>.</span> <span class=nv>consult-history</span><span class=p>))</span>                <span class=c1>;; orig. previous-matching-history-element</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Enable automatic preview at point in the *Completions* buffer. This is</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; relevant when you use the default completion UI.</span>
</span></span><span class=line><span class=cl>  <span class=nb>:hook</span> <span class=p>(</span><span class=nv>completion-list-mode</span> <span class=o>.</span> <span class=nv>consult-preview-at-point-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; The :init configuration is always executed (Not lazy)</span>
</span></span><span class=line><span class=cl>  <span class=nb>:init</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Optionally configure the register formatting. This improves the register</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; preview for `consult-register&#39;, `consult-register-load&#39;,</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; `consult-register-store&#39; and the Emacs built-ins.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>register-preview-delay</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>        <span class=nv>register-preview-function</span> <span class=nf>#&#39;</span><span class=nv>consult-register-format</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Optionally tweak the register preview window.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; This adds thin lines, sorting and hides the mode line of the window.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>advice-add</span> <span class=nf>#&#39;</span><span class=nv>register-preview</span> <span class=nb>:override</span> <span class=nf>#&#39;</span><span class=nv>consult-register-window</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Use Consult to select xref locations with preview</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>xref-show-xrefs-function</span> <span class=nf>#&#39;</span><span class=nv>consult-xref</span>
</span></span><span class=line><span class=cl>        <span class=nv>xref-show-definitions-function</span> <span class=nf>#&#39;</span><span class=nv>consult-xref</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Configure other variables and modes in the :config section,</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; after lazily loading the package.</span>
</span></span><span class=line><span class=cl>  <span class=nb>:config</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Optionally configure preview. The default value</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; is &#39;any, such that any key triggers the preview.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq consult-preview-key &#39;any)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq consult-preview-key &#34;M-.&#34;)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq consult-preview-key &#39;(&#34;S-&lt;down&gt;&#34; &#34;S-&lt;up&gt;&#34;))</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; For some commands and buffer sources it is useful to configure the</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; :preview-key on a per-command basis using the `consult-customize&#39; macro.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>consult-customize</span>
</span></span><span class=line><span class=cl>   <span class=nv>consult-theme</span> <span class=nb>:preview-key</span> <span class=o>&#39;</span><span class=p>(</span><span class=nb>:debounce</span> <span class=mf>0.2</span> <span class=nv>any</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=nv>consult-ripgrep</span> <span class=nv>consult-git-grep</span> <span class=nv>consult-grep</span>
</span></span><span class=line><span class=cl>   <span class=nv>consult-bookmark</span> <span class=nv>consult-recent-file</span> <span class=nv>consult-xref</span>
</span></span><span class=line><span class=cl>   <span class=nv>consult--source-bookmark</span> <span class=nv>consult--source-file-register</span>
</span></span><span class=line><span class=cl>   <span class=nv>consult--source-recent-file</span> <span class=nv>consult--source-project-recent-file</span>
</span></span><span class=line><span class=cl>   <span class=c1>;; :preview-key &#34;M-.&#34;</span>
</span></span><span class=line><span class=cl>   <span class=nb>:preview-key</span> <span class=o>&#39;</span><span class=p>(</span><span class=nb>:debounce</span> <span class=mf>0.4</span> <span class=nv>any</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Optionally configure the narrowing key.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Both &lt; and C-+ work reasonably well.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>consult-narrow-key</span> <span class=s>&#34;&lt;&#34;</span><span class=p>)</span> <span class=c1>;; &#34;C-+&#34;</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Optionally make narrowing help available in the minibuffer.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; You may want to use `embark-prefix-help-command&#39; or which-key instead.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (define-key consult-narrow-map (vconcat consult-narrow-key &#34;?&#34;) #&#39;consult-narrow-help)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; By default `consult-project-function&#39; uses `project-root&#39; from project.el.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Optionally configure a different project root function.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;;; 1. project.el (the default)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq consult-project-function #&#39;consult--default-project--function)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;;; 2. vc.el (vc-root-dir)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq consult-project-function (lambda (_) (vc-root-dir)))</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;;; 3. locate-dominating-file</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq consult-project-function (lambda (_) (locate-dominating-file &#34;.&#34; &#34;.git&#34;)))</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;;; 4. projectile.el (projectile-project-root)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (autoload &#39;projectile-project-root &#34;projectile&#34;)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq consult-project-function (lambda (_) (projectile-project-root)))</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;;; 5. No project support</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq consult-project-function nil)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><figure><a href=/ox-hugo/consult-buffer.png><img loading=lazy src=/ox-hugo/consult-buffer.png alt="Figure 13: consult-buffer"></a><figcaption><p><span class=figure-number>Figure 13: </span>consult-buffer</p></figcaption></figure><figure><a href=/ox-hugo/consult-flymake.png><img loading=lazy src=/ox-hugo/consult-flymake.png alt="Figure 14: consult-flymake"></a><figcaption><p><span class=figure-number>Figure 14: </span>consult-flymake</p></figcaption></figure><figure><a href=/ox-hugo/consult-yank-pop.png><img loading=lazy src=/ox-hugo/consult-yank-pop.png alt="Figure 15: consult-yank-pop"></a><figcaption><p><span class=figure-number>Figure 15: </span>consult-yank-pop</p></figcaption></figure><figure><a href=/ox-hugo/consult-outline.png><img loading=lazy src=/ox-hugo/consult-outline.png alt="Figure 16: consult-outline"></a><figcaption><p><span class=figure-number>Figure 16: </span>consult-outline</p></figcaption></figure><h2 id=corfu>Corfu<a hidden class=anchor aria-hidden=true href=#corfu>#</a></h2><p>Corfu enhances in-buffer completion with a small completion popup. The current candidates are shown in a popup below or above the point. The candidates can be selected by moving up and down. Corfu is the minimalistic in-buffer completion counterpart of the <a href=https://github.com/minad/vertico>Vertico</a> minibuffer UI<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>.</p><h3 id=installation>Installation<a hidden class=anchor aria-hidden=true href=#installation>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>corfu</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Optional customizations</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; :custom</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (corfu-cycle t)                ;; Enable cycling for `corfu-next/previous&#39;</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (corfu-auto t)                 ;; Enable auto completion</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (corfu-separator ?\s)          ;; Orderless field separator</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (corfu-quit-at-boundary nil)   ;; Never quit at completion boundary</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (corfu-quit-no-match nil)      ;; Never quit, even if there is no match</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (corfu-preview-current nil)    ;; Disable current candidate preview</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (corfu-preselect &#39;prompt)      ;; Preselect the prompt</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (corfu-on-exact-match nil)     ;; Configure handling of exact matches</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (corfu-scroll-margin 5)        ;; Use scroll margin</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>;; Enable Corfu only for certain modes.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; :hook ((prog-mode . corfu-mode)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;        (shell-mode . corfu-mode)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;        (eshell-mode . corfu-mode))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>;; Recommended: Enable Corfu globally.  This is recommended since Dabbrev can</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; be used globally (M-/).  See also the customization variable</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; `global-corfu-modes&#39; to exclude certain modes.</span>
</span></span><span class=line><span class=cl>  <span class=nb>:init</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>global-corfu-mode</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; A few more useful configurations...</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>emacs</span>
</span></span><span class=line><span class=cl>  <span class=nb>:init</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; TAB cycle if there are only few candidates</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>completion-cycle-threshold</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>;; Emacs 28: Hide commands in M-x which do not apply to the current mode.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Corfu commands are hidden, since they are not supposed to be used via M-x.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; (setq read-extended-command-predicate</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;       #&#39;command-completion-default-include-p)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>;; Enable indentation+completion using the TAB key.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; `completion-at-point&#39; is often bound to M-TAB.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>tab-always-indent</span> <span class=ss>&#39;complete</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Use Dabbrev with Corfu!</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>dabbrev</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Swap M-/ and C-M-/</span>
</span></span><span class=line><span class=cl>  <span class=nb>:bind</span> <span class=p>((</span><span class=s>&#34;M-/&#34;</span> <span class=o>.</span> <span class=nv>dabbrev-completion</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-M-/&#34;</span> <span class=o>.</span> <span class=nv>dabbrev-expand</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=nb>:config</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;dabbrev-ignored-buffer-regexps</span> <span class=s>&#34;\\` &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Since 29.1, use `dabbrev-ignored-buffer-regexps&#39; on older.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;dabbrev-ignored-buffer-modes</span> <span class=ss>&#39;doc-view-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;dabbrev-ignored-buffer-modes</span> <span class=ss>&#39;pdf-view-mode</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><figure><a href=/ox-hugo/corfu-completion.png><img loading=lazy src=/ox-hugo/corfu-completion.png alt="Figure 17: corfu completion"></a><figcaption><p><span class=figure-number>Figure 17: </span>corfu completion</p></figcaption></figure><p>By default, when typing, press <code>TAB</code> to start the completion, use <code>C-p</code> or <code>C-n</code> (<code>C-j</code> or <code>C-k</code> can also be used).</p><h3 id=enable-completion-in-the-minibuffer>Enable completion in the minibuffer<a hidden class=anchor aria-hidden=true href=#enable-completion-in-the-minibuffer>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>corfu-enable-always-in-minibuffer</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Enable Corfu in the minibuffer if Vertico/Mct are not active.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>unless</span> <span class=p>(</span><span class=nb>or</span> <span class=p>(</span><span class=nv>bound-and-true-p</span> <span class=nv>mct--active</span><span class=p>)</span>
</span></span><span class=line><span class=cl>              <span class=p>(</span><span class=nv>bound-and-true-p</span> <span class=nv>vertico--input</span><span class=p>)</span>
</span></span><span class=line><span class=cl>              <span class=p>(</span><span class=nf>eq</span> <span class=p>(</span><span class=nf>current-local-map</span><span class=p>)</span> <span class=nv>read-passwd-map</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=c1>;; (setq-local corfu-auto nil) ;; Enable/disable auto completion</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>setq-local</span> <span class=nv>corfu-echo-delay</span> <span class=no>nil</span> <span class=c1>;; Disable automatic echo and popup</span>
</span></span><span class=line><span class=cl>                <span class=nv>corfu-popupinfo-delay</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>corfu-mode</span> <span class=mi>1</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;minibuffer-setup-hook</span> <span class=nf>#&#39;</span><span class=nv>corfu-enable-always-in-minibuffer</span> <span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>This will enable corfu as long as there&rsquo;s no other completion active.</p><h3 id=nerd-icons-corfu>nerd-icons-corfu<a hidden class=anchor aria-hidden=true href=#nerd-icons-corfu>#</a></h3><p>Nerd-icons-corfu.el is a library for adding icons to completions in <a href=https://github.com/minad/corfu>Corfu</a>. It uses <a href=https://github.com/rainstormstudio/nerd-icons.el>nerd-icons.el</a> under the hood and, as such, works on both GUI and terminal<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>nerd-icons-corfu</span>
</span></span><span class=line><span class=cl>  <span class=nb>:ensure</span>
</span></span><span class=line><span class=cl>  <span class=nb>:config</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;corfu-margin-formatters</span> <span class=nf>#&#39;</span><span class=nv>nerd-icons-corfu-formatter</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>nerd-icons-corfu-mapping</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=nv>array</span> <span class=nb>:style</span> <span class=s>&#34;cod&#34;</span> <span class=nb>:icon</span> <span class=s>&#34;symbol_array&#34;</span> <span class=nb>:face</span> <span class=nv>font-lock-type-face</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nv>boolean</span> <span class=nb>:style</span> <span class=s>&#34;cod&#34;</span> <span class=nb>:icon</span> <span class=s>&#34;symbol_boolean&#34;</span> <span class=nb>:face</span> <span class=nv>font-lock-builtin-face</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1>;; ...</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=no>t</span> <span class=nb>:style</span> <span class=s>&#34;cod&#34;</span> <span class=nb>:icon</span> <span class=s>&#34;code&#34;</span> <span class=nb>:face</span> <span class=nv>font-lock-warning-face</span><span class=p>))))</span>
</span></span></code></pre></td></tr></table></div></div><figure><a href=/ox-hugo/nerd-icons-corfu.png><img loading=lazy src=/ox-hugo/nerd-icons-corfu.png alt="Figure 18: nerd-icons-corfu"></a><figcaption><p><span class=figure-number>Figure 18: </span>nerd-icons-corfu</p></figcaption></figure><h2 id=cape>Cape<a hidden class=anchor aria-hidden=true href=#cape>#</a></h2><p>Cape provides Completion At Point Extensions which can be used in combination with <a href=https://github.com/minad/corfu>Corfu</a>, <a href=https://github.com/company-mode/company-mode>Company</a> or the default completion UI. The completion backends used by <code>completion-at-point</code> are so called <code>completion-at-point-functions</code> (Capfs)<sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup>.</p><h3 id=configuration>Configuration<a hidden class=anchor aria-hidden=true href=#configuration>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=c1>;; Add extensions</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>use-package</span> <span class=nv>cape</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Bind dedicated completion commands</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Alternative prefix keys: C-c p, M-p, M-+, ...</span>
</span></span><span class=line><span class=cl>  <span class=nb>:bind</span> <span class=p>((</span><span class=s>&#34;C-c p p&#34;</span> <span class=o>.</span> <span class=nv>completion-at-point</span><span class=p>)</span> <span class=c1>;; capf</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p t&#34;</span> <span class=o>.</span> <span class=nv>complete-tag</span><span class=p>)</span>        <span class=c1>;; etags</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p d&#34;</span> <span class=o>.</span> <span class=nv>cape-dabbrev</span><span class=p>)</span>        <span class=c1>;; or dabbrev-completion</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p h&#34;</span> <span class=o>.</span> <span class=nv>cape-history</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p f&#34;</span> <span class=o>.</span> <span class=nv>cape-file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p k&#34;</span> <span class=o>.</span> <span class=nv>cape-keyword</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p s&#34;</span> <span class=o>.</span> <span class=nv>cape-elisp-symbol</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p e&#34;</span> <span class=o>.</span> <span class=nv>cape-elisp-block</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p a&#34;</span> <span class=o>.</span> <span class=nv>cape-abbrev</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p l&#34;</span> <span class=o>.</span> <span class=nv>cape-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p w&#34;</span> <span class=o>.</span> <span class=nv>cape-dict</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p :&#34;</span> <span class=o>.</span> <span class=nv>cape-emoji</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p \\&#34;</span> <span class=o>.</span> <span class=nv>cape-tex</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p _&#34;</span> <span class=o>.</span> <span class=nv>cape-tex</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p ^&#34;</span> <span class=o>.</span> <span class=nv>cape-tex</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p &amp;&#34;</span> <span class=o>.</span> <span class=nv>cape-sgml</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=s>&#34;C-c p r&#34;</span> <span class=o>.</span> <span class=nv>cape-rfc1345</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=nb>:init</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Add to the global default value of `completion-at-point-functions&#39; which is</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; used by `completion-at-point&#39;.  The order of the functions matters, the</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; first function returning a result wins.  Note that the list of buffer-local</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; completion functions takes precedence over the global list.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;completion-at-point-functions</span> <span class=nf>#&#39;</span><span class=nv>cape-dabbrev</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;completion-at-point-functions</span> <span class=nf>#&#39;</span><span class=nv>cape-file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;completion-at-point-functions</span> <span class=nf>#&#39;</span><span class=nv>cape-elisp-block</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-history)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-keyword)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-tex)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-sgml)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-rfc1345)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-abbrev)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-dict)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-elisp-symbol)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-line)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://github.com/minad/vertico>https://github.com/minad/vertico</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://github.com/minad/marginalia>https://github.com/minad/marginalia</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://github.com/oantolin/orderless>https://github.com/oantolin/orderless</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://github.com/minad/consult>https://github.com/minad/consult</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p><a href=https://github.com/minad/corfu>https://github.com/minad/corfu</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p><a href=https://github.com/LuigiPiucco/nerd-icons-corfu>https://github.com/LuigiPiucco/nerd-icons-corfu</a>&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7><p><a href=https://github.com/minad/cape>https://github.com/minad/cape</a>&#160;<a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://alexforsale.github.io/tags/emacs/>Emacs</a></li><li><a href=https://alexforsale.github.io/tags/configuration/>Configuration</a></li><li><a href=https://alexforsale.github.io/tags/vertico/>Vertico</a></li></ul><nav class=paginav><a class=prev href=https://alexforsale.github.io/posts/emacs-sane-defaults/><span class=title>« Prev</span><br><span>Emacs sane defaults</span>
</a><a class=next href=https://alexforsale.github.io/posts/emacs-avy/><span class=title>Next »</span><br><span>Emacs avy</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://alexforsale.github.io/>alexforsale.github.io</a></span>
<span><a href=https://github.com/alexforsale/alexforsale.github.io/ rel="noopener noreferrer" target=_blank>source</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>